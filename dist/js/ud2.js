/*! ud2 - v0.0.0
 * (c) 2015 Peak(peak@udtwo.com) */
if("undefined"==typeof $)throw new Error("ud2库需要JQuery支持");var ud2=function(a,b){"use strict";function c(a,b,c){a=d(a);var e=a.length,f=0;if(0===e)return P.clone();if(1===e)return a.attr(u+this.name+"-state")?void 0:a;for(;e>f;f++)this.create(a.eq(f),b,c+t+f)}function d(c){return c||(c=b()),W.isString(c)&&(c=b(c)),c===a&&(c=b(a)),W.isJQuery(c)||(c=b()),c}function e(a,c){a=d(a),a.each(function(){c(b(this))})}function f(a){var b=(a.attr(s)||"").split(" "),c=[];return b.forEach(function(a){0!==a.length&&c.push(a)}),c}function g(a,b){var c=f(a);return c.indexOf(b)>-1?!0:!1}function h(a,b){if(_[i(b)]&&!g(a,b)){var c=f(a);c.push(b),a.attr(s,c.join(" "))}}function i(a){var b=a.split("-"),c=1,d=b.length;if(d>1)for(;d>c;c++)b[c].length>0&&(b[c]=b[c].substr(0,1).toUpperCase()+b[c].substr(1));return b.join("")}function j(a,b){if(W.isObject(a)&&W.isObject(b))for(var c in b)void 0!==a[c]&&(a[c]=b[c])}function k(a,b){b.attr("style",a.attr("style")).addClass(a.attr("class")),a.removeAttr("style").removeClass()}function l(a,b){for(var c=a.get(0),d=b.get(0),e=c.attributes.length,f=/^(ud2-?|data\-|tabindex)/,g=0,h=0;e>g;g++)if(f.test(c.attributes[h].name)){var i=c.attributes[h];d.setAttribute(i.name,i.value),c.removeAttribute(i.name)}else h++}function m(a,b){var c=a.get(0),d=b.get(0),e=c.attributes.name;void 0!==e&&(d.setAttribute(e.name,e.value),c.removeAttribute(e.name))}function n(a,b){if(W.isObject(a)&&W.isObject(b)){for(var c in b)a[c]=b[c];return a}}var o,p=a.document,q=b(a),r=b(p),s="ud2",t="-",u=s+t,v=(" -webkit- -moz- -o- -ms- ".split(" "),function(){var b={},c=p.createElement("div"),d=a.navigator.userAgent;return b.safari=/constructor/i.test(a.HTMLElement),b.mobile=!!d.match(/mobile|mobi|mini/i),b.android=d.indexOf("Android")>-1,b.touch="ontouchstart"in a||a.DocumentTouch&&p instanceof DocumentTouch,b.pointer=a.navigator.pointerEnabled,b.msPointer=a.navigator.msPointerEnabled,b.touchAction=void 0!==c.style.touchAction||void 0!==c.style.msTouchAction||!1,b.perspective=void 0!==c.style.perspective||void 0!==c.style.msPerspective||void 0!==c.style.mozPerspective||void 0!==c.style.webkitPerspective||!1,b.transition=void 0!==c.style.transition||void 0!==c.style.msTransition||void 0!==c.style.mozTransition||void 0!==c.style.webkitTransition||void 0!==c.style.oTransition||!1,b.animation=void 0!==c.style.animation||void 0!==c.style.mozAnimation||void 0!==c.style.webkitAnimation||void 0!==c.style.oAnimation||!1,b}()),w=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)},x={date:/^(?:[12]\d{3}([\.\-\/])(?:(?:0?[13578]|1[02])\1(?:0?[1-9]|[12]\d|3[01])|(?:0?[469]|11)\1(?:0?[1-9]|[12]\d|30)|0?2\1(?:0?[1-9]|1\d|2[0-8]))$|[12]\d(?:[02468][048]|[13579][26])([\.\-\/])(?:(?:0?[13578]|1[02])\2(?:0?[1-9]|[12]\d|3[01])|(?:0?[469]|11)\2(?:0?[1-9]|[12]\d|30)|0?2\2(?:0?[1-9]|1\d|2[0-9])))$/,mail:/^([\w-\.]+)@(([\w-]+\.)+)([a-zA-Z]{2,4})$/,phone:/^[1][3458][0-9]{9}$/,identityCard:/^(11|12|13|14|15|21|22|23|31|32|33|34|35|36|37|41|42|43|44|45|46|50|51|52|53|54|61|62|63|64|65|71|81|82|97|98|99)[0-9]{4}((?:19|20)?(?:[0-9]{2}(?:(?:0[13578]|1[12])(?:0[1-9]|[12][0-9]|3[01])|(?:0[469]|11)(?:0[1-9]|[12][0-9]|30)|02(?:0[1-9]|1[0-9]|2[0-8]))|(?:[02468][048]|[13579][26])0229)[0-9]{3}[\dxX])$/,loginName:/^[a-zA-Z][a-zA-Z0-9]+$/},y=function(){var a=0;return{create:function(){return"nonamed-"+a++}}}(),z=Date.now||function(){return(new Date).getTime()},A=v.pointer?"pointerdown":"MSPointerDown",B=v.pointer?"pointermove":"MSPointerMove",C=v.pointer?"pointerup":"MSPointerUp",D="touchstart",E="touchmove",F="touchend",G="touchcancel",H="mousedown",I="mousemove",J="mouseup",K="mouseout",L="mouseenter",M="mouseleave",N=[A,D,H].join(" "),O=["normal","info","success","warning","danger"],P=b("<div />"),Q=b("<a />"),R=function(){return!1},S=!1,T=b.Callbacks(),U=b.Callbacks(),V=b.Callbacks(),W=function(){function a(a){return function(b){return{}.toString.call(b)==="[object "+a+"]"}}function c(b){return a("Object")(b)}function d(b){return a("Function")(b)}function e(b){return a("String")(b)}function f(b){return a("Number")(b)}function g(a){return/^([1-9]\d+|[0-9])$/.test(a)}function h(a){return a instanceof b}return{isType:a,isObject:c,isFunction:d,isString:e,isNumber:f,isNaturalNumber:g,isJQuery:h}}(),X=function(){function a(a){return isNaturalNumber(a)?+a:0}return{toNaturalNumber:a}}(),Y=function(){function a(a){return W.isString(a)?a:""}function b(b,c,d){return b=a(b),c=c||Number.MAX_VALUE,"undefined"!=typeof d?(c>d&&(d=c),b.length<=d&&b.length>=c):b.length===c}function c(b,c){return b=a(b),c=c||0,b.length>=c}function d(b,c){return b=a(b),c=c||Number.MAX_VALUE,b.length<=c}function e(b){return b=a(b),x.phone.test(b)}function f(b){return b=a(b),x.mail.test(b)}function g(b){return b=a(b),x.date.test(b)}function h(b){return b=a(b),x.loginName.test(b)}function i(b){if(b=a(b),b=b.toUpperCase(),x.identityCard.test(b)){if(18===b.length){for(var c=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],d=[1,0,"X",9,8,7,6,5,4,3,2],e=b.split(""),f=0,g=0;17>g;g++)f+=e[g]*c[g];var h=d[f%11];if(h!=e[17])return!1}return!0}return!1}return{isLength:b,isMinLength:c,isMaxLength:d,isPhone:e,isMail:f,isDate:g,isLoginName:h,isIdentityCard:i}}(),Z=function(c,d){function f(a,b){b?a.css({"-ms-touch-action":"none","touch-action":"none"}):a.css({"-ms-touch-action":"auto","touch-action":"auto"}),v.touchAction||(b?a.bind("selectstart",R):a.unbind("selectstart",R))}function g(){if(v.mobile){var b,c=P.clone().css({position:"fixed",top:0,right:0,left:0,bottom:0,"z-index":999999999});o.append(c),c.bind(D,function(a){a.stopPropagation(),a.preventDefault()}).bind("click",function(d){d.preventDefault(),d.stopPropagation(),b&&a.clearTimeout(b),c.remove()}),b=a.setTimeout(function(){c.remove()},500)}}function h(a){return N.pan=a,L}function i(a){return N.tap=a,L}function k(a){return N.press=a,L}function l(a){return N.swipeLeft=a,L}function m(a){return N.swipeRight=a,L}function n(a){return N.swipeTop=a,L}function p(a){return N.swipeBottom=a,L}function q(a){return N.down=a,L}function s(a){return N.up=a,L}function t(){Q.forEach(function(){arguments[0].bind()})}function w(){Q.forEach(function(){arguments[0].unbind()})}function x(a,b){this.del=!1,this.id=a,this.downScreenX=b?b.screenX:0,this.downScreenY=b?b.screenY:0,this.downPageX=b?b.pageX:0,this.downPageY=b?b.pageY:0,this.downClientX=b?b.clientX:0,this.downClientY=b?b.clientY:0,this.moveScreenX=this.downScreenX,this.moveScreenY=this.downScreenY,this.movePageX=this.downPageX,this.movePageY=this.downPageY,this.moveClientX=this.downClientX,this.moveClientY=this.downClientY}function y(a){function b(a){0===c()&&(R.id=a,R.time=z())}function c(){var a=0;for(var b in Q)Q[b].del||a++;return a}function d(){for(var a in Q)Q[a].del&&delete Q[a]}function e(a){M.stopPropagation&&a.stopPropagation();var d=a.originalEvent,e=d.pointerId;b(e),0===c()&&(r.bind(P[1],h),r.bind(P[2],i)),(!Q[e]||Q[e].del)&&(Q[e]=new x(e,d),p(a,e))}function h(a){M.stopPropagation&&a.stopPropagation(),a.preventDefault();var b=a.originalEvent,c=b.pointerId;Q[c]&&(Q[c].setMove(b),q(a,c))}function i(a){M.stopPropagation&&a.stopPropagation();var b=a.originalEvent,d=b.pointerId;Q[d]&&(s(a,d),Q[d].del=!0,0===c()&&(r.unbind(P[1],h),r.unbind(P[2],i)))}function j(a){M.stopPropagation&&a.stopPropagation();var d=a.originalEvent,e=d.changedTouches;0===c()&&(L.bind(P[4],k),L.bind(P[5],l),L.bind(P[6],l)),b(e[0].identifier);for(var f=0,g=e.length;g>f;f++)(!Q[e[f].identifier]||Q[e[f].identifier].del)&&(Q[e[f].identifier]=new x(e[f].identifier,e[f])),p(a,e[f].identifier)}function k(a){M.stopPropagation&&a.stopPropagation(),a.preventDefault();for(var b=a.originalEvent,c=b.changedTouches,d=0,e=c.length;e>d;d++)Q[c[d].identifier]&&Q[c[d].identifier].setMove(c[d]),q(a,c[d].identifier)}function l(a){M.stopPropagation&&a.stopPropagation();for(var b=a.originalEvent,d=b.changedTouches,e=0,f=d.length;f>e;e++)s(a,d[e].identifier),Q[d[e].identifier].del=!0;0===c()&&(L.unbind(P[4],k),L.unbind(P[5],l),L.unbind(P[6],l))}function m(a){M.stopPropagation&&a.stopPropagation();var c=a.originalEvent;b(0),Q[0]=new x(0,c),p(a,0),r.bind(P[8],n),r.bind(P[9],o)}function n(a){M.stopPropagation&&a.stopPropagation(),a.stopPropagation();var b=a.originalEvent;Q[0]&&(Q[0].setMove(b),q(a,0))}function o(a){M.stopPropagation&&a.stopPropagation(),Q[0]&&(s(a,0),void 0!==Q[0]&&Q[0].del===!1&&(Q[0].del=!0),r.unbind(P[8],n),r.unbind(P[9],o))}function p(b,c){S=!1;for(var d=a.parents(),e=d.length,f=0;e>f;f++)if("1"===d.eq(f).attr(u+"scroll-runing")){S=!0;break}N.down.call(a,c)}function q(b,c){var d=Q[c].getMoveLength();b.preventDefault(),N.pan.call(a,d,c)}function s(b,c){var e=null,f=Q[c].getMoveLength(),h={x:Math.abs(f.x),y:Math.abs(f.y)};O&&z()-O.time<500&&"touchend"===O.type&&"mouseup"===b.type||(O={time:z(),type:b.type},R.id===c&&(e=new Date-R.time,R.id=null,R.time=null),e&&(h.x<M.pointerValidLength&&h.y<M.pointerValidLength&&(S||(e<M.tapMaxTime?(g(),N.tap.call(a)):N.press.call(a))),h.x>=M.pointerValidLength&&h.x>=h.y&&e<M.swipeMaxTime&&(f.x<0?(b.preventDefault(),N.swipeLeft.call(a)):(b.preventDefault(),N.swipeRight.call(a))),h.y>=M.pointerValidLength&&h.y>=h.x&&e<M.swipeMaxTime&&(f.y<0?(b.preventDefault(),N.swipeTop.call(a)):(b.preventDefault(),N.swipeBottom.call(a)))),N.up.call(a,c),d())}function t(a){v.pointer||v.msPointer?a?L.bind(P[0],e):L.unbind(P[0],e):a?(L.bind(P[3],j),L.bind(P[7],m)):(L.unbind(P[3],j),L.unbind(P[7],m)),a?f(L,!0):f(L,!1)}function w(){T||(T=!0,t(!0))}function y(){T&&(T=!1,t(!1))}var L=a,P=[A,B,C,D,E,F,G,H,I,J,K],Q={},R={id:null,time:null},S=!1,T=!1;return function(){w();var b=a.find("a, img");b.bind("dragstart",function(a){a.preventDefault()})}(),{bind:w,unbind:y}}var L={},M={stopPropagation:!1,tapMaxTime:300,swipeMaxTime:500,pointerValidLength:5},N={pan:b.noop,tap:b.noop,press:b.noop,swipeLeft:b.noop,swipeRight:b.noop,swipeTop:b.noop,swipeBottom:b.noop,down:b.noop,up:b.noop},O=null,Q=[];return x.prototype.setMove=function(a){a&&a.screenX&&(this.moveScreenX=a.screenX),a&&a.screenY&&(this.moveScreenY=a.screenY),a&&a.pageX&&(this.movePageX=a.pageX),a&&a.pageY&&(this.movePageY=a.pageY),a&&a.clientX&&(this.moveClientX=a.clientX),a&&a.clientY&&(this.moveClientY=a.clientY)},x.prototype.getMoveLength=function(){return{x:this.movePageX-this.downPageX,y:this.movePageY-this.downPageY}},function(){j(M,d),e(c,function(a){Q.push(y(a))})}(),L={setPan:h,setTap:i,setPress:k,setSwipeLeft:l,setSwipeRight:m,setSwipeTop:n,setSwipeBottom:p,setDown:q,setUp:s,on:t,off:w}},$=function(a,c){function d(a){return n.scroll=a,l}function f(a){return n.down=a,l}function g(a){return n.up=a,l}function h(){p.forEach(function(){arguments[0].bind()})}function i(){p.forEach(function(){arguments[0].unbind()})}function k(a){function b(b){b.stopPropagation(),b.preventDefault();var c=b.originalEvent,d=c.deltaY/100||c.wheelDelta/-120||(Math.abs(c.detail)>2?c.detail/3:c.detail)||0;n.scroll.call(a,d),d>0?n.down.call(a):n.up.call(a)}function c(){f||(f=!0,e.bind(o,b))}function d(){f&&(f=!1,e.unbind(o,b))}var e=a,f=!1;return function(){c()}(),{bind:c,unbind:d}}var l={},m={},n={scroll:b.noop,down:b.noop,up:b.noop},o="DOMMouseScroll mousewheel",p=[];return function(){j(m,c),e(a,function(a){p.push(k(a))})}(),l={setScroll:d,setDown:f,setUp:g,on:h,off:i}},_=function(){function a(){function a(){var a=b(this),c=f(a);c.forEach(function(b,c){var d=i(b),e=a.attr(u+b+"-state");e||_[d].create(a)})}var c=b("["+s+"]");c.each(a);for(var d in _)_[d]&&_[d].isControlsGroup&&_[d].findDocument()}var c={};return function(){for(var a=0;a<O.length;a++)c[O[a]]=a;c.ico=function(a){var b;switch(a){case 1:b='<i class="ico ico-hollow-info"></i>';break;case 2:b='<i class="ico ico-hollow-ok"></i>';break;case 3:b='<i class="ico ico-hollow-warning"></i>';break;case 4:b='<i class="ico ico-hollow-cancel"></i>'}return b}}(),{createAll:a,style:c}}(),aa=function(a,c){function e(a){var c=W.isJQuery(a)?a:b(a),d=c.parents();if(l.$current){if(c.get(0)===l.$current.get(0))return;for(var e=0,f=d.length;f>e;e++)if(d.eq(e).get(0)===l.$current.get(0))return}l.autoClose()}function f(a){var b=["","info","success","warning","danger"];l.style===_.style.info&&l.$current.removeClass(b[l.style]),l.style===_.style.success&&l.$current.removeClass(b[l.style]),l.style===_.style.warning&&l.$current.removeClass(b[l.style]),l.style===_.style.danger&&l.$current.removeClass(b[l.style]),l.style=a,l.$current.addClass(b[a])}function g(a){d(a).after(l.$current)}function h(a){d(a).before(l.$current)}function i(a){d(a).append(l.$current)}function j(a){d(a).prepend(l.$current)}var k,l={},m=this;return k=d(a),0===k.length&&(k=P.clone()),k.length>1&&(k=k.eq(0)),c=k.attr(u+"name")||c,c||(c=y.create()),k.attr(u+"name",c),l.style=_.style.normal,l.$origin=k,l.attr=function(a,b){var c=b?a:m["class"]+t+a;return k.attr(c)},l.$current=null,l.autoClose=function(){},l["public"]={isUD2:!0,name:c,style:f,insertAfter:g,insertBefore:h,appendTo:i,prependTo:j},V.add(e),l},ba=function(a){var d=[];return d.name=W.isString(a)?a:"empty",d["class"]=u+d.name,d.controlName=i(a),d.isControlsGroup=!0,d.findDocument=b.noop,d.init=function(a,b){return a["public"]},d.create=function(){var a=arguments,b=a.length;if(3!==b)switch(b){case 0:return this.create("",void 0,void 0);case 1:return W.isObject(a[0])&&!W.isJQuery(a[0])?this.create("",a[0],void 0):this.create(a[0],void 0,void 0);case 2:return W.isObject(a[0])&&!W.isJQuery(a[0])&&W.isString(a[1])?this.create("",a[0],a[1]):this.create(a[0],a[1],void 0)}var d=c.apply(this,arguments);if(d){var e=aa.call(this,d,a[2]);return this.push(e["public"]),this[e["public"].name]=e["public"],h(e.$origin,this.name),e.$origin.attr(u+this.name+"-state",!0),this.init(e,a[1]),e["public"]}},_[d.controlName]=d,d},ca=function(c,e){function f(){if(K.hasVertical){var a=0,b=0,c=0;if(a=R.height(),ba.h=Q.height(),ba.ih=Q.innerHeight(),ba.sh=a-ba.h,ba.now.y<-ba.sh&&(ba.now.y=-ba.sh),c=ba.ih-2*K.barOffset,0!==ba.h){var d=ba.sh/(5*ba.ih);d=1-(d>1?1:d),b=c*d,b=b<K.barMinLength?K.barMinLength:b,b=b>c?c:b,ca.h=b,ca.mh=c,ca.sh=c-b,T.height(b)}}if(K.hasHorizontal){var e=0,f=0,g=0;if(e=R.width(),ba.w=Q.width(),ba.iw=Q.innerWidth(),ba.sw=e-ba.w,ba.now.x<-ba.sw&&(ba.now.x=-ba.sw),g=ba.iw-2*K.barOffset,0!==ba.w){var d=ba.sw/(5*ba.iw);d=1-(d>1?1:d),f=g*d,f=f<K.barMinLength?K.barMinLength:f,f=f>g?g:f,ca.w=f,ca.mw=g,ca.sw=g-f,S.width(f)}}}function g(){var a,b;if(v.transition){var c=R.css("transform");c=c.split(")")[0].split(", "),a=Math.round(+(c[12]||c[4])),b=Math.round(+(c[13]||c[5]))}else a=ba.now.x,b=ba.now.y;return{x:a,y:b}}function h(a){Y!==a&&(Y=a,Q.attr(V,a?1:0))}function i(a,b){var c=b?"sh":"sw";return 0===ba[c]||0===ca[c]?0:a/ba[c]*ca[c]}function k(a,b){var c=b?"sh":"sw";return 0===ba[c]||0===ca[c]?0:a/ca[c]*ba[c]}function l(a,b,c,d){c=c||0,d=d||W.circular,a>0&&(a=0),b>0&&(b=0),b<-ba.sh&&(b=-ba.sh),a<-ba.sw&&(a=-ba.sw),v.transition?(m(d.css),n(c),R.css("transform","translate("+a+"px, "+b+"px)"+(v.perspective?" translateZ(0)":"")),K.hasVertical&&T.css("transform","translate(0, "+i(-b,1)+"px)"+(v.perspective?" translateZ(0)":"")),K.hasHorizontal&&S.css("transform","translate("+i(-a,0)+"px, 0)"+(v.perspective?" translateZ(0)":"")),ba.now={x:a,y:b}):0===c?(R.css({left:a,top:b}),K.hasVertical&&T.css("top",i(-b,1)+"px"),K.hasHorizontal&&S.css("left",i(-a,0)+"px"),ba.now={x:a,y:b}):o(a,b,c,d.fn)}function m(a){R.css("transition-timing-function",a),T.css("transition-timing-function",a+", ease-out, ease-out, ease-out"),S.css("transition-timing-function",a+", ease-out, ease-out, ease-out")}function n(b){var c=parseInt(b);R.css("transition-duration",c+"ms"),T.css("transition-duration",c+"ms, 300ms, 300ms, 300ms"),S.css("transition-duration",c+"ms, 300ms, 300ms, 300ms"),0!==c?(_&&a.clearTimeout(_),_=a.setTimeout(function(){l(ba.now.x,ba.now.y,0),h(!1),q()},c)):(h(!1),q())}function o(a,b,c,d){function e(){var j,k,l,m=z();i>m?(m=(m-h)/c,l=d(m),j=(a-f)*l+f,k=(b-g)*l+g,ba.now={x:j,y:k},R.css({left:j,top:k}),K.hasVertical&&T.css("top",-k/ba.sh*ca.sh),K.hasHorizontal&&S.css("left",-j/ba.sh*ca.sh),Y&&w(e)):Y=!1}var f=ba.now.x,g=ba.now.y,h=z(),i=h+c;Y=!0,e()}function p(){0===K.barState&&(ca.timer&&a.clearTimeout(ca.timer),v.transition?(S.stop().fadeIn(200),T.stop().fadeIn(200)):(S.show(),T.show()))}function q(){0===K.barState&&(O||N||Y||(ca.timer&&a.clearTimeout(ca.timer),ca.timer=a.setTimeout(function(){v.transition?(S.stop().fadeOut(500),T.stop().fadeOut(500)):(S.hide(),T.hide())},1e3)))}function r(a,b,c,d,e,f){var g,h,i=a-b,j=Math.abs(i)/c;return d=-d,e=e||0,f=f||5e-4,g=a+j*j/(2*f)*(0>i?-1:1),h=j/f,d>g?(g=e?d-e/2.5*(j/8):d,i=Math.abs(g-a),h=i/j):g>0&&(g=e?e/2.5*(j/8):0,i=Math.abs(a)+g,h=i/j),{destination:Math.round(g),duration:h}}function s(){return R}function t(){return Y}function x(){return f(),l(ba.now.x,ba.now.y),J}function y(a,b,c,d){return l(-a,-b,c,d),J}function A(){f(),p();var a=g();l(a.x,a.y),X.moved=!1,X.start=z(),X.startMove={x:ba.now.x,y:ba.now.y},X.lastMove={x:0,y:0}}function B(a){var b=z(),c=a.x,d=a.y,e=Math.abs(c),f=Math.abs(d),g=c-X.lastMove.x,h=d-X.lastMove.y,i=0,j=0;p(),X.lastMove={x:c,y:d},b-X.end>300&&aa>e&&aa>f||(X.moved||(X.moved=!0),K.hasVertical&&(j=h+ba.now.y),K.hasHorizontal&&(i=g+ba.now.x),(0!==g||0!==h)&&l(i,j),b-X.start>=300&&(X.start=b,X.startMove.x=i,X.startMove.y=j))}function C(){var a=ba.now.x,b=ba.now.y,c=a,d=b,e=null,f=null,g=z()-X.start,i=0;if(X.end=z(),q(),X.moved&&K.slowMoving){if(300>g){var j=0,k=0;K.hasVertical&&(f=r(b,X.startMove.y,g,ba.sh,K.bounce?ba.h:0),d=f.destination,k=f.duration),K.hasHorizontal&&(e=r(a,X.startMove.x,g,ba.sw,K.bounce?ba.w:0),c=e.destination,j=e.duration),i=Math.max(j,k)}(c!==a||d!==b)&&(p(),h(!0),l(c,d,i))}}function D(a){var b=ba.now.x,c=ba.now.y,d=300,e=K.mousewheelLength;f(),"normal"===e&&(e=Math.round(ba.h)),a>0?c-=e:c+=e,c>0||c<-ba.sh?h(!1):(p(),h(!0)),l(b,c,d)}function E(){this.move=0,N=!0,p(),b(this).css("background",K.barColorOn)}function G(){N=!1,q(),b(this).css("background",K.barColor)}function H(a,b){var c=b?ba.now.x:k(-(a.x-this.move),0)+ba.now.x,d=b?k(-(a.y-this.move),1)+ba.now.y:ba.now.y;b?this.move=a.y:this.move=a.x,l(c,d)}function I(){K.recountByResize&&U.add(x),0===K.barState&&Q.bind(L,function(){f(),O=!0,p()}).bind([M,F].join(" "),function(){O=!1,q()}),K.isTouchMode&&Z(Q,{stopPropagation:!0}).setDown(A).setUp(C).setPan(B),K.isMouseWheelMode&&$(Q).setScroll(D),K.isScrollMode&&(Z(T,{stopPropagation:!0}).setPan(function(a){H.call(this,a,1)}).setDown(E).setUp(G),Z(S,{stopPropagation:!0}).setPan(function(a){H.call(this,a,0)}).setDown(E).setUp(G))}var J={},K={recountByResize:!1,barState:0,barSize:6,barMinLength:30,barOffset:1,barColor:"rgba(0,0,0,.4)",barColorOn:"rgba(0,0,0,.6)",barBorderRadiusState:!0,isMouseWheelMode:!0,isTouchMode:!0,isScrollMode:!1,mousewheelLength:"normal",hasHorizontal:!1,hasVertical:!0,slowMoving:!0},N=!1,O=!1,Q=d(c).eq(0),R=P.clone().addClass(u+"scroll-wrapper"),S=P.clone().addClass(u+"scroll-bar"),T=P.clone().addClass(u+"scroll-bar"),V=u+"scroll-runing",W={quadratic:{css:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(a){return a*(2-a)}},circular:{css:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(a){return Math.sqrt(1- --a*a)}}},X={id:null,start:0,end:0,moved:!1,startMove:{x:0,y:0},lastMove:{x:0,y:0}},Y=!1,_=null,aa=5,ba={h:0,ih:0,sh:0,w:0,iw:0,sw:0,now:{x:0,y:0},isMoved:!1},ca={h:0,mh:0,sh:0,w:0,mw:0,sw:0,timer:null};return function(){j(K,e),"normal"===K.mousewheelLength||isNaturalNumber(K.mousewheelLength)||(K.mousewheelLength="normal");var a=Q.contents();0===a.length?Q.append(R):(a.wrapAll(R),R=Q.children("."+u+"scroll-wrapper")),R.css("padding",Q.css("padding-top")+" "+Q.css("padding-right")+" "+Q.css("padding-bottom")+" "+Q.css("padding-left")),Q.addClass("ud2-scroll"),K.hasVertical&&(Q.prepend(T),R.css({height:"auto","min-height":"100%"})),K.hasHorizontal&&(Q.prepend(S),R.css({width:"auto","min-width":"100%"})),T.css({top:K.barOffset,right:K.barOffset,width:K.barSize,background:K.barColor}),S.css({left:K.barOffset,bottom:K.barOffset,height:K.barSize,background:K.barColor}),K.barBorderRadiusState&&(T.css("border-radius",K.barSize/2),S.css("border-radius",K.barSize/2)),1===K.barState&&(T.show(),S.show()),f(),I()}(),J={move:y,getState:t,getContent:s,recountPosition:x}},da=function(c,d,e){function f(){if(d){var b=_.style.ico(d);b?(k.children().first().before(b),k.addClass(O[d])):k.children().first().before('<i class="ico">'+d+"</i>"),e&&0!==e&&k.addClass(O[e])}k.children().last().html(c),o.append(k),a.setTimeout(function(){k.addClass(j+"-on")},50)}function g(){k.addClass(j+"-close"),a.setTimeout(function(){k.remove()},1e3)}function h(a){for(var b=0,c=0,d=a.length;d>c;c++)b+=a[c];return b}function i(){for(var a=b("."+j),c=[],d=10,e=a.length;e>0;e--){var f=a.eq(e-1);f.css("top",(c.length+1)*d+h(c)),c.push(f.outerHeight())}}var j=u+"message",k=b('<div class="ud2-message"><div class="ud2-message-text"></div></div>');d=d||"",e=e||_.style.normal,function l(){var l=function(){f(),i(),a.setTimeout(g,5e3)};S?l():T.add(l)}()},ea=function(){function c(d){function f(){var d,f;switch(q.html(m.title),W.isJQuery(m.content)?s.append(m.content):s.html(m.content),m.ico&&(f=_.style.ico(m.ico),f?(f=b(f),f.addClass("c-"+O[m.ico])):(f=b('<i class="ico">'+m.ico+"</i>"),m.icoStyle&&f.addClass("c-"+O[m.icoStyle]))),r.prepend(f),m.type){case c.type.alert:d='<a class="btn btn-solid btn-square" ud2-dialog-send>确　定</a>';break;case c.type.confirm:case c.type.prompt:d='<a class="btn btn-solid btn-square" ud2-dialog-send>确　定</a><a class="btn btn-solid btn-square" ud2-dialog-cancel>取　消</a>'}t.html(d),o.append(n),Z(t.children("["+e+"-send]")).setTap(function(){m.type===c.type.prompt?u.send.call(l,s.find("["+e+"-input]").val()):u.send.call(l),g()}),Z(t.children("["+e+"-cancel]")).setTap(function(){u.cancel.call(l),g()}),a.setTimeout(function(){n.addClass(e+"-on")},50)}function g(){n.addClass(e+"-close"),a.setTimeout(function(){n.remove()},300)}function h(a){return W.isFunction(a)&&(u.send=a),l}function i(a){return W.isFunction(a)&&(u.cancel=a),l}function k(){return s}var l={},m={type:c.type.alert,width:null,height:null,ico:null,icoStyle:null,title:"",content:""},n=b('<div class="ud2-dialog"><div class="ud2-dialog-box"><div class="ud2-dialog-box-header"></div><div class="ud2-dialog-box-body"><div class="ud2-dialog-box-text"></div></div><div class="ud2-dialog-box-footer"></div></div></div>'),p=n.children(),q=p.children(":first"),r=q.next(),s=r.children(":last"),t=r.next(),u={send:b.noop,cancel:b.noop};return function(){j(m,d),S?f():T.add(f)}(),l={setSend:h,setCancel:i,getContent:k}}function d(){var a,b,c,d,e,f,g=arguments,h=g.length;return a=g[0],b=g[1],(W.isNumber(g[2])||W.isString(g[2]))&&(c=g[2]),W.isNumber(g[3])&&(d=g[3]),3===h&&W.isFunction(g[2])&&(e=g[2]),4===h&&W.isFunction(g[2])&&W.isFunction(g[3])&&(e=g[2],f=g[3]),4===h&&!W.isFunction(g[2])&&W.isFunction(g[3])&&(e=g[3]),5===h&&W.isFunction(g[3])&&W.isFunction(g[4])&&(e=g[3],f=g[4]),5===h&&!W.isFunction(g[3])&&W.isFunction(g[4])&&(e=g[4]),6===h&&(e=g[4],f=g[5]),{title:a,content:b,ico:c,icoStyle:d,sendFn:e,cancelFn:f}}var e=u+"dialog";return c.type={alert:0,confirm:1,prompt:2,custom:3},c.alert=function(){var a,b=d.apply(this,arguments);return b.type=c.type.alert,a=c(b).setSend(b.sendFn),a?a:void 0},c.confirm=function(){var a,b=d.apply(this,arguments);return b.type=c.type.confirm,a=c(b).setSend(b.sendFn).setCancel(b.cancelFn),a?a:void 0},c.prompt=function(){var a,b=d.apply(this,arguments),f='<input type="text" class="txtbox" '+e+"-input />";return b.type=c.type.prompt,W.isJQuery(b.content)?b.content.append(f):b.content+=f,a=c(b).setSend(b.sendFn).setCancel(b.cancelFn),a?a:void 0},c}();(function(a){a.init=function(c,d){function e(a){if(this.group){var b=this.group.options.indexOf(this);this.group.options.splice(b,1)}a?this.group=a:this.group=null}function f(a,b,c,d,e){if(!(this instanceof f))return new f(a,b,c,d,e);this.group=e||null,this.name=a||"",this.value=b||this.name,this.disabled=c||!1,this.selected=!this.disabled&&(d||!1),this.createElement(),this.selected&&t(this),f.list.push(this),this.group?this.inGroup(this.group):O.getContent().append(this.$element)}function g(a,b){if(!(this instanceof g))return new g(a,b);this.name=a||"",this.disabled=b||!1,this.options=[],this.createElement(),g.list.push(this),O.getContent().append(this.$element)}function h(){var a=c.$origin.children("optgroup");i();for(var b,d=0,e=a.length;e>d;d++){var f=a.eq(d),h=f.attr("label")||"",j=!(!f.attr("disabled")||"false"===f.attr("disabled"));b=new g(h,j),i(b,f)}}function i(a,b){for(var d=a?!0:!1,e=a?b.children("option"):c.$origin.children("option"),g=0,h=e.length;h>g;g++){var i=(e.eq(g),e.eq(g).html()),j=e.eq(g).val(),k=!(!e.eq(g).attr("disabled")||"false"===e.eq(g).attr("disabled")),l=!(!e.eq(g).attr("selected")||"false"===e.eq(g).attr("selected"));d?new f(i,j,k,l,a):new f(i,j,k,l)}}function o(a){var b=null;if(E.isMultiple){var d=-1,e=[];for(var f in F)if(F[f]===a){d=f;break}d>-1?(a.setSelected(!1),F.splice(d,1)):(a.setSelected(!0),F.push(a));for(var f in F)e.push(F[f].value);0===F.length?(J.attr(D+"-value",null),J.html(E.autoText)):(J.attr(D+"-value",!0),J.html(e.length+"个项目")),b=e,L.val(e.join(","))}else F[0]&&F[0].setSelected(!1),J.attr(D+"-value",!0),a.setSelected(!0),F[0]=a,J.html(a.name),b=a.value,L.val(b);P.change.call(c["public"],b)}function p(){switch(E.direction){case"up":G.addClass(D+"-dir-up");break;case"down":G.addClass(D+"-dir-down")}}function q(a){return P.open=a,c["public"]}function r(a){return P.close=a,c["public"]}function s(a){return P.change=a,c["public"]}function t(a){a.disabled||a.group&&a.group.disabled||(o(a),E.isMultiple||x())}function u(a){for(var b in f.list)if(f.list[b].value===a&&(t(f.list[b]),!E.isMultiple))break}function v(a){var a=W.isString(a)?a:E.autoText;return E.autoText=a,J.html(a),c["public"]}function w(){return N||(N=!0,G.addClass(D+"-on"),A(),P.open.call(c["public"])),c["public"]}function x(){return N&&(N=!1,G.removeClass(D+"-on"),P.close.call(c["public"])),c["public"]}function y(){return N?x():w(),c["public"]}function z(){if(E.isMultiple){var a=[];for(var b in F)a.push(F[b].$element.attr(D+"-value"));return a}return F[0]?F[0].$element.attr(D+"-value"):""}function A(){var a=f.list.length,b=g.list.length,d=0;return d=2.5*a+2*b,d=d>E.maxHeight?E.maxHeight:d,H.css("height",d+"em"),O.recountPosition(),c["public"]}function B(){if(F[0]){var a;w(),a=F[0].$element.position().top,x(),O.move(0,a,300)}}function C(){var a=Z(I);a.setTap(y),K.bind("focus",function(){V.fire(G),w()})}var D=a["class"],E={maxHeight:20,autoText:c.attr("text")||"请选择以下项目",isMultiple:!!c.attr("multiple",1),direction:function(){var a=c.attr("dir")||"down";return"up"!==a&&(a="down"),a}()},F=[],G=b('<div class="'+D+'"><div class="'+D+'-put"><a class="'+D+'-btn" /><i class="'+D+'-ico" /></div><div class="'+D+'-list" /><input type="checkbox" /><input type="hidden" /></div>'),H=G.children("div:last"),I=G.children("div:first"),J=I.children("a"),K=G.children('[type="checkbox"]'),L=G.children('[type="hidden"]'),M=Q.clone(),N=!1,O=null,P={open:b.noop,close:b.noop,change:b.noop};return f.list=[],f.prototype={createElement:function(){var a=M.clone(),b=this;a.html(this.name).attr("title",this.name).attr(D+"-value",this.value).addClass(D+"-option"),this.group&&a.addClass(D+"-ingroup"),(this.disabled||this.group&&this.group.disabled)&&a.attr(D+"-disabled","true"),this.$element=a,Z(this.$element).setTap(function(){t(b)})},setSelected:function(a){this.selected=a,this.selected?this.$element.addClass(D+"-option-on"):this.$element.removeClass(D+"-option-on")},toggleSelected:function(a){a?this.setSelected(!1):this.setSelected(!0)},inGroup:function(a){if(a instanceof g){e.call(this,a),this.group.options.push(this),this.$element.addClass(D+"-ingroup"),this.group.disabled?this.$element.attr(D+"-disabled","true"):this.$element.removeAttr(D+"-disabled");var b=a.$element.nextUntil(":not(."+D+"-ingroup)"),c=b.length;0===c?a.$element.after(this.$element):b.last().after(this.$element)}},outGroup:function(){this.group&&(e.call(this),O.getContent().append(this.$element),this.$element.removeClass(D+"-ingroup"),this.disabled||this.$element.removeAttr(D+"-disabled"))},remove:function(){e.call(this);var a=f.list.indexOf(this);f.list.splice(a,1),this.$element.remove()}},g.list=[],g.prototype={createElement:function(){var a=M.clone();a.html(this.name).attr("title",this.name).addClass(D+"-group"),this.$element=a,this.disabled&&this.$element.attr(D+"-disabled","true")}},function(){c.$current=G,c.autoClose=x,j(E,d),k(c.$origin,G),l(c.$origin,G),m(c.$origin,L),O=ca(H,{barState:0,isScrollMode:!0,barColor:"rgba(0,0,0,.2)",barColorOn:"rgba(0,0,0,.4)"}),p(),v(),h(),c.$origin.after(G),c.$origin.remove(),C()}(),n(c["public"],{open:w,close:x,toggle:y,val:z,select:t,selectByValue:u,moveToSelected:B,recountHeight:A,setShowText:v,setOpen:q,setClose:r,setChange:s,option:f,group:g})}})(ba("select")),function(c){c.init=function(d,e){function f(){c.data||b.ajax({url:C.json,method:"get",dataType:"json"}).done(function(a){c.data=a,J.removeClass(B+"-load")})}function g(a){var b=I.children(),c=J.children();b.removeClass(B+"-tab-on "+B+"-tab-open"),b.eq(a).addClass(B+"-tab-on"),b.eq(0).addClass(B+"-tab-open"),D.province&&b.eq(1).addClass(B+"-tab-open"),D.city&&b.eq(2).addClass(B+"-tab-open"),c.detach()}function h(){if(c.data){g(0);for(var b in c.data){var d=c.data[b].name;D.provinceList[d]||(D.provinceList[d]=M.clone().html(d),Z(D.provinceList[d]).setTap(function(a){return function(){D.province=c.data[a],D.city=null,D.area=null,i(),q()}}(b))),D.province&&D.province.name===d?D.provinceList[d].addClass(B+"-area-me"):D.provinceList[d].removeClass(B+"-area-me"),J.append(D.provinceList[d])}}else O&&(a.clearInterval(O),O=null),O=a.setInterval(h,50)}function i(){g(1);for(var a in D.province.city){var b=D.province.city[a].name,c=D.province.name+b;D.cityList[c]||(D.cityList[c]=M.clone().html(b),Z(D.cityList[c]).setTap(function(a){return function(){D.city=D.province.city[a],D.area=null,o(),q()}}(a))),D.city&&D.city.name===b?D.cityList[c].addClass(B+"-area-me"):D.cityList[c].removeClass(B+"-area-me"),J.append(D.cityList[c])}}function o(){g(2);for(var a in D.city.area){var b=D.city.area[a],c=D.province.name+D.city.name+b;D.areaList[c]||(D.areaList[c]=M.clone().html(b),Z(D.areaList[c]).setTap(function(a){return function(){D.area=D.city.area[a],q(),x()}}(a))),D.area&&D.area===b?D.areaList[c].addClass(B+"-area-me"):D.areaList[c].removeClass(B+"-area-me"),J.append(D.areaList[c])}}function p(){var a=this.index();0===a&&h(),D.province&&1===a&&i(),D.province&&D.city&&2===a&&o()}function q(){var a="",b=[];D.province?(a+=D.province.name,D.city&&(a+="<span>/</span>"+D.city.name,D.area&&(a+="<span>/</span>"+D.area,b=[D.province.name,D.city.name,D.area])),G.attr(B+"-value",!0),G.html(a)):(G.attr(B+"-value",null),G.html(C.autoText)),L.val(b.join(",")),Q.change.call(d["public"],b)}function r(a){return Q.open=a,d["public"]}function s(a){return Q.close=a,d["public"]}function t(a){return Q.change=a,d["public"]}function v(a){var a=W.isString(a)?a:C.autoText;return C.autoText=a,G.html(a),d["public"]}function w(){return N||(N=!0,E.addClass(B+"-on"),H.addClass(u+"ctrl-power-on"),D.province?D.city?o():i():h(),Q.open.call(d["public"])),d["public"]}function x(){return N&&(O&&(a.clearInterval(O),O=null),null===D.area&&(D.province=null,D.city=null,q()),N=!1,E.removeClass(B+"-on"),H.removeClass(u+"ctrl-power-on"),Q.close.call(d["public"])),d["public"]}function y(){return N?x():w(),d["public"]}function z(){var a=[];return D.province&&D.city&&D.area&&(a.push(D.province.name),a.push(D.city.name),a.push(D.area)),a}function A(){var a=Z(G);a.setTap(y);var b=Z(H);b.setTap(y);var c=Z(I.children());c.setTap(p),K.bind("focus",function(){V.fire(E),w()})}var B=c["class"],C={autoText:d.attr("text")||"请选择城市信息",json:d.attr("json")||"/dist/json/address.json"},D={province:null,city:null,area:null,provinceList:[],cityList:[],areaList:[]},E=b('<div class="'+B+'"><a class="'+B+'-btn" /><div class="ud2-ctrl-power"><i class="ico ico-position"></i><i class="ico ico-solid-cancel"></i></div><div class="'+B+'-list"><div class="'+B+'-tabbox"><div class="'+B+'-tab">省份</div><div class="'+B+'-tab">城市</div><div class="'+B+'-tab">区县</div></div><div class="'+B+"-areabox "+B+'-load" /></div><input type="checkbox" /><input type="hidden" /></div>'),F=E.children("div"),G=E.children("a"),H=G.next(),I=F.children("div:first"),J=F.children("div:last"),K=E.children('[type="checkbox"]'),L=E.children('[type="hidden"]'),M=P.clone().addClass(B+"-area"),N=!1,O=null,Q={
open:b.noop,close:b.noop,change:b.noop};return function(){d.$current=E,d.autoClose=x,j(C,e),k(d.$origin,E),l(d.$origin,E),m(d.$origin,L),f(),v(),d.$origin.after(E),d.$origin.remove(),A()}(),n(d["public"],{val:z,open:w,close:x,toggle:y,setOpen:r,setClose:s,setChange:t})}}(ba("address")),function(a){a.init=function(c,d){function e(){var a,b,c,d,e,j;j=function(){var a=I.step||1;return a=parseFloat(a),("number"!=typeof a||isNaN(a)||0===a)&&(a=1),a}(),a=function(){var a=I.min||0;return a=parseFloat(a),("number"!=typeof a||isNaN(a))&&(a=0),a}(),b=function(){var a=I.max||100;return a=parseFloat(a),("number"!=typeof N||isNaN(a))&&(a=100),a}(),c=i(I.value),d=c[0],e=c[1],a>b&&(b=a),L=j,N=a,O=b,L.toString().indexOf(".")>-1&&(M=L.toString().split(".")[1].length),g(),h(d,e),f()}function f(){Y.nl=p(J),Y.nr=p(K)}function g(){Y.w=U.outerWidth(),Y.bw=T.width(),Y.max=Y.bw-Y.w}function h(a,b){var d,e,f,g,h,i,j;N>a&&(a=N),a>O&&(a=O),J=Math.round((a-N)/L)*($*L)/$+N,d=p(J),U.css("left",o(d)+"%"),I.both?(N>b&&(b=N),b>O&&(b=O),K=Math.round((b-N)/L)*($*L)/$+N,e=p(K),W.css({left:o(e)+"%"}),f=Math.min(d,e),g=Math.max(d,e),h=Math.min(J,K),i=Math.max(J,K),X.css({left:100*f+"%",width:100*(g-f)+"%"}),R.val(h+","+i),j=[h,i]):(X.css("width",100*d+"%"),R.val(J),j=J),aa.change.call(c["public"],j)}function i(a){var b=null,c=null;return a=a?a.split(","):[0,0],b=a[0]||0,b=0!==b?parseFloat(b)||0:b,c=a[1]||0,c=0!==c?parseFloat(c)||0:c,[b,c]}function o(a){return a*Y.max/Y.bw*100}function p(a){var b=(a-N)/(O-N);return b}function q(a){return aa.open=a,c["public"]}function r(a){return aa.close=a,c["public"]}function s(a){return aa.change=a,c["public"]}function t(){return _||(g(),I.both?h(J,K):h(J),f(),_=!0,P.addClass(H+"-on"),S.addClass(u+"ctrl-power-on"),aa.open.call(c["public"])),c["public"]}function v(){return _&&(_=!1,P.removeClass(H+"-on"),S.removeClass(u+"ctrl-power-on"),aa.close.call(c["public"])),c["public"]}function w(){return _?v():t(),c["public"]}function x(){if(I.both){var a=Math.min(J,K),b=Math.max(J,K);return[a,b]}return J}function y(){V.fire(P),t()}function z(a){13===a.keyCode&&R.blur()}function A(){var a=i(R.val());g(),h(a[0],a[1]),f()}function B(a,b){var c=a*Y.max+b,d=null;return 0>c&&(c=0),c>Y.max&&(c=Y.max),d=parseFloat(((O-N)*c/Y.max+N).toFixed(M)),d=isNaN(d)?N:d}function C(a){I.both?h(B(Y.nl,a.x),K):h(B(Y.nl,a.x))}function D(){Y.nl=p(J)}function E(a){h(J,B(Y.nr,a.x))}function F(){Y.nr=p(K)}function G(){var a=Z(U),b=Z(W);Z(S).setTap(w),a.setDown(g).setPan(C).setUp(D),b.setDown(g).setPan(E).setUp(F),R.bind("focus",y).bind("keydown",z).bind("blur",A)}var H=a["class"],I={both:function(){var a=c.attr("both");return a&&"false"!==a?!0:!1}(),step:c.attr("step",1)||c.attr("step"),min:c.attr("min",1)||c.attr("min"),max:c.attr("max",1)||c.attr("max"),value:c.attr("value",1)||c.attr("value")},J=0,K=0,L=0,M=0,N=0,O=0,P=b('<div class="'+H+'"><input type="text" maxlength="20" class="ud2-ctrl-txtbox" /><div class="ud2-ctrl-power"><i class="ico ico-range-x"></i><i class="ico ico-solid-cancel"></i></div><div class="'+H+'-list"><div class="'+H+'-end" /><div class="'+H+'-back" /></div></div>'),R=P.children("input"),S=R.next(),T=S.next(),U=Q.clone().addClass(H+"-hand"),W=Q.clone().addClass(H+"-hand"),X=T.find("."+H+"-back"),Y={max:0,bw:0,w:0,nl:0,nr:0},$=1e7,_=!1,aa={open:b.noop,close:b.noop,change:b.noop};return function(){c.$current=P,c.autoClose=v,j(I,d),k(c.$origin,P),l(c.$origin,P),m(c.$origin,R),c.$origin.after(P),c.$origin.remove(),X.after(U),I.both&&X.after(W),e(),G()}(),n(c["public"],{val:x,open:t,close:v,toggle:w,setOpen:q,setClose:r,setChange:s})}}(ba("range")),function(a){a.init=function(c,d){function e(){v=t.step,w=t.min,x=t.max,w>x&&(x=w),u=f(t.value),z.val(u)}function f(a){return a=a||0,a=parseFloat(a),("number"!=typeof a||isNaN(a))&&(a=0),w>a&&(a=w),a>x&&(a=x),a=Math.round((a-w)/v)*(D*v)/D+w}function g(a){if(!E){if(E=!0,a&&u+v>x||!a&&w>u-v)return void(E=!1);var b=P.clone().addClass(s+"-view").html('<input class="ud2-ctrl-txtbox" />'),c=P.clone().addClass(s+"-view").html('<input class="ud2-ctrl-txtbox" />');z.parent();u=a?Math.round((u+v)*D)/D:Math.round((u-v)*D)/D,b.children().val(u),c.children().val(u),z.before(b),z.after(c),C.animate({top:a?"-100%":"100%"},300,function(){E=!1,o(u),C.css("top",0),b.remove(),c.remove()})}}function h(){g(0)}function i(){g(1)}function o(a){u=a,z.val(u),F.change.call(c["public"],u)}function p(a){return F.change=a,c["public"]}function q(){return u}function r(){Z(A).setTap(h),Z(B).setTap(i),z.keydown(function(a){13===a.keyCode&&z.blur()}).focus(function(){V.fire(y),y.addClass(s+"-on")}).blur(function(){var a=f(z.val());o(a),y.removeClass(s+"-on")})}var s=a["class"],t={step:function(){var a=c.attr("step",1)||c.attr("step")||1;return a=parseFloat(a),(isNaN(a)||0===a)&&(a=1),a}(),min:function(){var a=c.attr("min",1)||c.attr("min")||0;return a=parseFloat(a),(W.isNumber(v)||isNaN(a))&&(a=0),a}(),max:function(){var a=c.attr("max",1)||c.attr("max")||100;return a=parseFloat(a),(W.isNumber(v)||isNaN(a))&&(a=100),a}(),value:c.attr("value",1)||c.attr("value")||0},u=0,v=0,w=0,x=0,y=b('<div class="'+s+'"><a class="'+s+'-ico">&#xe106;</a><div class="'+s+'-move"><input type="text" value="0" class="ud2-ctrl-txtbox" /></div><a class="'+s+'-ico">&#xe107;</a></div>'),z=y.find("input"),A=y.children("a:first"),B=y.children("a:last"),C=A.next(),D=1e7,E=!1,F={change:b.noop};return function(){c.$current=y,j(t,d),e(),k(c.$origin,y),l(c.$origin,y),m(c.$origin,z),c.$origin.after(y),c.$origin.remove(),r()}(),n(c["public"],{val:q,setChange:p})}}(ba("number")),function(a){a.init=function(c,d){function e(a){var b=A.format,c=/^dd?(-|\.|\/)MM?\1yy(?:yy)?$/,d=/^((?:\d{2}|\d{4})年|(?:\d{1,2})月|(?:\d{1,2})日){1,3}$/;if(d.test(a)){var e=/(\d{1,2})日/.exec(a),f=/(\d{1,2})月/.exec(a),g=/(\d{2}|\d{4})年/.exec(a);e=e&&e[1]||"1",f=f&&f[1]||"1",g=g&&g[1]||B.time.getFullYear().toString(),B.setDateValue(g,f,e)}else if(c.test(b)){var h=c.exec(b)[1],i=a.split(h);B.setDateValue(i[2],i[1],i[0])}else if("yyyy-MM-dd"===b){var i=a.split("-");B.setDateValue(i[0],i[1],i[2])}else{var j=new Date(a);isNaN(j)?(A.format="yyyy/MM/dd",null!==B.time?B.setDateValue(B.time.getFullYear().toString(),(B.time.getMonth()+1).toString(),B.time.getDate().toString()):H.val("")):B.setDateValue(j.getFullYear(),j.getMonth()+1,j.getDate())}}function f(){var a=J.find("."+z+"-tools a");g(),Z(a.eq(0)).setTap(function(){B.select.setFullYear(B.select.getFullYear()-1),g()}),Z(a.eq(3)).setTap(function(){B.select.setFullYear(B.select.getFullYear()+1),g()}),Z(a.eq(1)).setTap(function(){B.select.setMonth(B.select.getMonth()-1),g()}),Z(a.eq(2)).setTap(function(){B.select.setMonth(B.select.getMonth()+1),g()}),Z(L).setTap(function(){J.slideUp(300),K.slideDown(300),i()}),Z(N).setTap(function(){B.setDateValue(B.now.getFullYear(),B.now.getMonth()+1,B.now.getDate()),t(!0)})}function g(){var a=J.children("table"),b=J.find("."+z+"-tools-text"),c=[],d=B.select.getFullYear()%4===0,e=B.select.getMonth()-1<0?11:B.select.getMonth()-1,f=F[B.select.getMonth()],g=F[e],h=new Date(B.select.getFullYear(),B.select.getMonth(),1).getDay();b.html(B.select.getFullYear()+"年 "+(B.select.getMonth()+1)+"月"),d&&1===B.select.getMonth()&&(f=29),d&&2===B.select.getMonth()&&(g=29),c.push("<tr>");for(var i in D)c.push("<th>"+D[i]+"</th>");c.push("</tr><tr>");for(var i=0,j=-1,k=0;42>i;i++)h>i?(j++,c.push('<td class="',z,'-nomonth">',g-h+i+1,"</td>")):f>=i-j?c.push('<td class="',(i+1)%7===0||(i+1)%7===1?z+"-weekend":"",'" ',z,'-date="',i-j,'" ',B.select.getFullYear()===B.now.getFullYear()&&B.select.getMonth()===B.now.getMonth()&&B.now.getDate()===i-j?z+"-today ":"",B.time&&B.select.getFullYear()===B.time.getFullYear()&&B.select.getMonth()===B.time.getMonth()&&B.time.getDate()===i-j?z+"-now ":"",">",i-j,"</td>"):(k++,c.push('<td class="',z,'-nomonth">',k,"</td>")),(i+1)%7===0&&c.push("</tr><tr>");a.children().remove(),a.append(c.join("")),Z(a.find("["+z+"-date]")).setTap(function(){B.setDateValue(B.select.getFullYear(),B.select.getMonth()+1,this.attr(z+"-date")),B.view(),H.blur(),t(!0)})}function h(){var a=K.find("."+z+"-tools a"),b=K.find("."+z+"-btns button");i(),Z(a.eq(0)).setTap(function(){B.select.setFullYear(B.select.getFullYear()-12),i()}),Z(a.eq(1)).setTap(function(){B.select.setFullYear(B.select.getFullYear()+12),i()}),Z(b.eq(0)).setTap(function(){J.slideDown(300),K.slideUp(300),g()}),Z(M).setTap(function(){J.slideDown(300),K.slideUp(300),g()})}function i(){var a=K.children("table"),b=[],c=0,d=z+"-year",e="["+d+"]",f=z+"-month",g="["+f+"]",h=z+"-now";c=B.select.getFullYear()%12===0?B.select.getFullYear()-11:12*parseInt(B.select.getFullYear()/12)+1,b.push("<tr><td>");for(var i=0;12>i;i++)b.push("<div ",z,'-year="',c+i,'" ',B.select.getFullYear()===c+i?h:"",">",c+i,"</div>");b.push("</td><td>");for(var i=0;12>i;i++)b.push("<div ",z,'-month="',i,'" ',B.select.getMonth()===i?h:"",">",E[i],"</div>");b.push("</td></tr>"),a.children().remove(),a.append(b.join("")),Z(a.find(e)).setTap(function(){B.select.setFullYear(this.attr(d)),a.find(e).removeAttr(h),this.attr(h,"")}),Z(a.find(g)).setTap(function(){B.select.setMonth(this.attr(f)),a.find(g).removeAttr(h),this.attr(h,"")})}function o(a){return P.open=a,c["public"]}function p(a){return P.close=a,c["public"]}function q(a){return P.change=a,c["public"]}function r(){var a=arguments,b=a.length;return 1===b&&H.val(a[0]),""!==H.val()&&(e(H.val()),B.selectReset(),B.view()),1===b?c["public"]:H.val()}function s(){return O||(O=!0,G.addClass(z+"-on"),I.addClass(u+"ctrl-power-on"),J.show(),K.hide(),P.open.call(c["public"])),c["public"]}function t(a){return O&&(O=!1,G.removeClass(z+"-on"),I.removeClass(u+"ctrl-power-on"),""===H.val()&&null!==B.time&&(B.time=null,P.change.call(c["public"],"")),a||""===H.val()||(e(H.val()),""!==H.val()&&(B.selectReset(),B.view())),g(),P.close.call(c["public"])),c["public"]}function v(){return O?t():s(),c["public"]}function w(){V.fire(G),s()}function x(a){13===a.keyCode&&(t(),H.blur())}function y(){var a=Z(I);a.setTap(v),H.bind("focus",w).bind("keydown",x)}var z=a["class"],A={autoText:c.attr("placeholder",1)||c.attr("text")||"请选择日期",format:c.attr("format")||"yyyy/MM/dd",date:c.attr("value",1)||c.attr("value")||""},B={seats:function(a){return(1===a.toString().length?"0":"")+a},toString:function(){var a=A.format;return a=a.replace(/y{4}/,this.time.getFullYear()).replace(/y{2}/,this.time.getFullYear()-2e3).replace(/MM/,this.seats(this.time.getMonth()+1)).replace(/M/,this.time.getMonth()+1).replace(/dd/,this.seats(this.time.getDate())).replace(/d/,this.time.getDate())},setDateValue:function(a,b,d){3===arguments.length&&arguments[0]&&arguments[1]&&arguments[2]&&(2===a.length&&(a="20"+a),a=parseInt(a),b=parseInt(b)-1,d=parseInt(d),(null===this.time||this.time.getFullYear()!==a||this.time.getMonth()!==b||this.time.getDate()!==d)&&(this.time=new Date(a,b,d),this.view(),P.change.call(c["public"],r())))},view:function(){H.val(this.toString())},time:null,now:new Date,select:new Date,selectReset:function(){this.select=new Date(this.time.getFullYear(),this.time.getMonth(),this.time.getDate()),g()}},C=["上一年","下一年","上个月","下个月","前12年","后12年","年份选择","返回日期选择"],D=["日","一","二","三","四","五","六"],E=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],F=[31,28,31,30,31,30,31,31,30,31,30,31],G=b('<div class="'+z+'"><input type="text" placeholder="'+A.autoText+'" maxlength="20" class="ud2-ctrl-txtbox" /><span class="ud2-ctrl-power"><i class="ico ico-calendar"></i><i class="ico ico-solid-cancel"></i></span><div class="'+z+'-list"><div class="'+z+'-datelist"><div class="ud2-calendar-tools"><div class="ud2-calendar-tools-left"><a class="ico" title="'+C[0]+'">&#xec00;</a><a class="ico" title="'+C[2]+'">&#xec01;</a></div><div class="ud2-calendar-tools-right"><a class="ico" title="'+C[3]+'">&#xec02;</a><a class="ico" title="'+C[1]+'">&#xec03;</a></div><div class="ud2-calendar-tools-text" title="'+C[6]+'">-年 -月</div></div><table /><div class="ud2-calendar-btns"><button class="btn sm" tabindex="-1">今日</button></div></div><div class="'+z+'-ymlist"><div class="ud2-calendar-tools"><div class="ud2-calendar-tools-left"><a class="ico" title="'+C[4]+'">&#xec00;</a></div><div class="ud2-calendar-tools-right"><a class="ico" title="'+C[5]+'">&#xec03;</a></div><div class="ud2-calendar-tools-text" title="'+C[7]+'">年份 / 月份</div></div><table /><div class="ud2-calendar-btns"><button class="btn sm" tabindex="-1">确定</button></div></div></div></div>'),H=G.children('[type="text"]'),I=H.next(),J=G.find("."+z+"-datelist"),K=G.find("."+z+"-ymlist"),L=J.find("."+z+"-tools-text"),M=K.find("."+z+"-tools-text"),N=J.find("."+z+"-btns button"),O=!1,P={open:b.noop,close:b.noop,change:b.noop};return function(){c.$current=G,c.autoClose=t,j(A,d),""!==c.$origin.val()&&(e(c.$origin.val()),B.selectReset()),k(c.$origin,G),l(c.$origin,G),m(c.$origin,H),c.$origin.after(G),c.$origin.remove(),f(),h(),y()}(),n(c["public"],{val:r,open:s,close:t,toggle:v,setOpen:o,setClose:p,setChange:q})}}(ba("calendar")),function(a){a.init=function(c,d){function e(){w=A.now,x=A.max,y=A.show,w>x&&(w=x)}function f(){var a,b=[],c=B.find("["+z+"-num]");for(c.remove(),a=y;a>=1;a--)w-a>0&&b.push('<a class="btn btn-solid" '+z+'-num="'+(w-a)+'">'+(w-a)+"</a>");for(b.push('<a class="btn btn-solid btn-green" '+z+'-num="'+w+'" '+z+"-now>"+w+"</a>"),a=1;y>=a;a++)x>=w+a&&b.push('<a class="btn btn-solid" '+z+'-num="'+(w+a)+'">'+(w+a)+"</a>");u.eq(1).after(b.join("")),c=B.find("["+z+"-num]"),Z(c).setTap(function(){var a=this.attr(z+"-num");a=parseInt(a),i(a)})}function g(){h();for(var a=1;x>=a;a++){var b=a==w?!0:!1;v.option(a,a,!1,b)}}function h(){for(var a=v.option.list,b=a.length,c=0;b>c;c++)a[0].remove()}function i(a){a>x&&(a=x),1>a&&(a=1),D=!1,v.selectByValue(a),v.moveToSelected(),D=!0,k(a)}function k(a){a!==w&&(w=a,f(),E.change.call(c["public"],w))}function l(){i(1)}function m(){i(x)}function o(){i(w-1)}function p(){i(w+1)}function q(a){return E.change=a,c["public"]}function r(){var a=arguments,b=a.length;return 1===b&&W.isNaturalNumber(a[0])?(w=parseInt(a[0]),1>w&&(w=1),w>x&&(w=x),f(),v.selectByValue(w),v.moveToSelected(),c["public"]):w}function s(){var a=arguments,b=a.length;return 1===b&&W.isNaturalNumber(a[0])?(x=parseInt(a[0]),1>x&&(x=1),w>x&&(w=x),g(),f(),v.moveToSelected(),c["public"]):x}function t(){Z(u.eq(0)).setTap(l),Z(u.eq(1)).setTap(o),Z(u.eq(2)).setTap(p),Z(u.eq(3)).setTap(m),v.setChange(function(a){D&&k(parseInt(a))})}var u,v,w,x,y,z=a["class"],A={now:function(){var a=c.attr("now")||1;return a=parseInt(a),(isNaN(a)||1>a)&&(a=1),a}(),max:function(){var a=c.attr("max")||100;return a=parseInt(a),(isNaN(a)||1>a)&&(a=100),a}(),show:function(){var a=c.attr("show")||2;return a=parseInt(a),(isNaN(a)||1>a)&&(a=2),a}()},B=c.$origin,C="<a>首页</a><a>上页</a><a>下页</a><a>尾页</a>",D=!0,E={change:b.noop};return function(){j(A,d),e(),B.addClass(z+" ctrl-group").html(C),u=B.find("a").addClass("btn btn-solid"),v=_.select.create({direction:"up"},c["public"].name+"-list"),v.appendTo(B),g(),f(),t()}(),n(c["public"],{setChange:q,now:r,max:s})}}(ba("page")),function(a){a.init=function(c,d){function e(a){return this instanceof e?(this.section=a||H.tbody,this.cells=[],this.$current=b('<tr class="'+D+'-row" />'),this.section.$current.find("tbody").append(this.$current),void this.section.row.push(this)):new e(a)}function f(a){return this instanceof f?(this.section=a||H.tbody,this.cells=[],void this.section.col.push(this)):new f(a)}function g(a){if(!(this instanceof g))return new g(a);if(a&&W.isObject(a)||(a={}),this.section=a.section||H.tbody,this.rowIndex=a.rowIndex,this.colIndex=a.colIndex,void 0===this.rowIndex||void 0===this.colIndex||!this.section.row[this.rowIndex]||!this.section.row[this.rowIndex].cells[this.colIndex]){this.text=a.text||"",this.summary=a.summary||"",this.className=a.className||"",this.style=a.style||"",this.rowspan=a.rowspan||1,this.colspan=a.colspan||1,this.merged=a.merged||!1,this.inGrid=!1;var c=this.rowspan>1?' rowspan="'+this.rowspan+'"':"",d=this.colspan>1?' colspan="'+this.colspan+'"':"",e=b("<td"+c+d+' class="'+D+'-cell"><div class="'+D+'-cell-content" title="'+this.summary+'">'+this.text+"</div></td>");this.className&&e.addClass(this.className),this.style&&e.attr(style,this.style),this.$current=e,this.SaveToGrid()}}function h(){z=!!E.recountByResize||!1,A=parseFloat(E.autoMinWidth),(isNaN(A)||0>A)&&(A=26),"*"!==B&&(B=parseFloat(E.colNormalWidth),(isNaN(B)||0>B)&&(B="*")),C=E.colAllWidth,C instanceof Array||(C=W.isString(C)&&""!==C?C.split(","):[])}function i(){var a,b=p.createElement("p"),c=H.tbody.$current.get(0);return b.className=D+"-scroll",c.appendChild(b),a=b.offsetWidth-b.clientWidth,c.removeChild(b),a+3}function m(a){var b=a.map(function(a){if(isNaN(a)){var b=F.exec(a),c="*";if(null!==b){if(""!==b[1]){var d=parseFloat(b[1]);isNaN(d)||(c=d+c)}return c}return B}var b=parseFloat(a);return 0>b&&(b=B),b}),c=b.length,d=Math.max(H.thead.col.length,H.tbody.col.length,H.tfoot.col.length);if(d>c)for(var e=c;d>e;e++)b[e]=B;H.colWidth=b}function o(a){var c=a.$origin.children("tr"),d=c.eq(0).children("td, th"),g=0,h=0;h=c.length,d.each(function(a){g+=parseInt(b(this).attr("colspan")||1)});for(var i=0;g>i;i++)new f(a);for(var i=0;h>i;i++)new e(a);return{row:h,col:g}}function q(a){var d=H[a];if(d.$origin=c.$origin.children(a),0===d.$origin.length)return void("tbody"===a&&(c.$origin.append("<tbody />"),q(a)));d.$current=b('<div class="'+D+"-"+a+'"><div class="'+D+'-inner"><table class="'+D+'-table"><tbody /></table></div></div>'),d.getContent=function(){return d.$current},G.append(d.$current);for(var e,f,h,i,j,k,l=d.$origin.children("tr"),m=o(d),n=[],p=0;p<m.row;p++)for(var r=0,s=0;r<m.col;r++,s++){var t=!1;n.forEach(function(a){return r>=a.start[1]&&r<=a.start[1]+a.len[1]&&p>=a.start[0]&&p<=a.start[0]+a.len[0]?(s--,void(t=!0)):void 0}),t?new g({section:d,rowIndex:p,colIndex:r,merged:!0}):(e=l.eq(p).children("td, th").eq(s),f=parseInt(e.attr("colspan")||1),h=parseInt(e.attr("rowspan")||1),i=e.attr("class"),j=e.attr("style"),k=e.attr("title"),(f>0||h>0)&&n.push({start:[p,r],len:[h-1,f-1]}),new g({section:d,text:e.html(),className:i,style:j,rowIndex:p,colIndex:r,rowspan:h,colspan:f,summary:k}))}}function r(){q("thead"),q("tbody"),q("tfoot")}function s(){var a=arguments,b=arguments.length;if(0===b)return 0!==H.thead.$origin.length&&s(H.thead),0!==H.tbody.$origin.length&&s(H.tbody),0!==H.tfoot.$origin.length&&s(H.tfoot),c["public"];if(a[0]instanceof Array)m(a[0]),s();else if("number"==typeof a[0]&&"number"==typeof a[1])H.colWidth[a[0]]=a[1],s();else if("object"==typeof a[0]){var d,e,f=a[0].row,g=f.length,h=0,j=0,k=0,l=0,n=0;if(H.colWidth.forEach(function(a){var b=F.exec(a);if(b){var c=parseFloat(b[1]);c=isNaN(c)?1:c,j+=c,h++}else l+=a}),h>0){var o=G.parent().width();I||(I=i()),o-=I,k=o>l+A*j?(o-l)/j:A}H.colWidth.forEach(function(a){var b=F.exec(a);if(b){var c=parseFloat(b[1]);c=isNaN(c)?1:c,n+=c*k}else n+=a}),a[0].$current.find("."+D+"-table").css("width",n);for(var p=0;g>p;p++){d=f[p].cells,e=d.length;for(var q=0;e>q;q++)if(!d[q].merged){var r=H.getColWidth(q),t=F.exec(r);if(t){var u=parseFloat(t[1]);u=isNaN(u)?1:u,r=k*u,r=A>r?A:r}if(1!==d[q].colspan)for(var v,w,x=d[q].colspan-1,y=1;x>=y;y++){if(v=H.getColWidth(q+y),w=F.exec(v)){var z=parseFloat(w[1]);z=isNaN(z)?1:z,v=k*z,v=A>v?A:v}r+=v}d[q].$current.css("width",r)}}}}function t(a){var b=H.thead.$current?H.thead.$current.outerHeight():0,d=H.tfoot.$current?H.tfoot.$current.outerHeight():0;if(void 0===a){var e=G.height();H.tbody.$current.css("height",e-b-d)}else H.tbody.$current.css("height",parseInt(a)-b-d);return c["public"]}function u(a){return z=!!a,z?(U.add(x),x()):U.remove(x),c["public"]}function v(a){if(a&&a instanceof Array){var b=new e,c=H.tbody.row.indexOf(b);a.forEach(function(a,b){H.tbody.col[b]||new f,a.SaveToGrid(c,b)}),x()}}function w(){H.tbody.row=[],H.tbody.cell=[],H.tbody.col.forEach(function(a){a.cells=[]}),H.tbody.$current.find("tbody").html("")}function x(){s(),t()}function y(){u(z),H.tbody.$current.scroll(function(){var a=H.tbody.$current.scrollLeft();H.thead.$current&&H.thead.$current.scrollLeft(a),H.tfoot.$current&&H.tfoot.$current.scrollLeft(a)})}var z,A,B,C,D=a["class"],E={recountByResize:!1,autoMinWidth:c.attr("colwidth-auto"),colNormalWidth:c.attr("colwidth-normal"),colAllWidth:c.attr("colwidth")},F=/([0-9\.]*)\*$/,G=b('<div class="'+D+'" />'),H={thead:{row:[],col:[],cell:[]},tbody:{row:[],col:[],cell:[]},tfoot:{row:[],col:[],cell:[]},colWidth:[],getColWidth:function(a){return H.colWidth[a]}},I=null;return e.prototype={addCell:function(a){this.cells.push(a)}},f.prototype={addCell:function(a){this.cells.push(a)}},g.prototype={SaveToGrid:function(){var a=arguments,b=a.length;if(2===b&&W.isNaturalNumber(a[0])&&W.isNaturalNumber(a[1]))this.rowIndex=a[0],this.colIndex=a[1],this.SaveToGrid();else if(0===b&&!this.inGrid&&void 0!==this.rowIndex&&void 0!==this.colIndex&&(this.inGrid=!0,this.section.cell.push(this),this.section.row[this.rowIndex].addCell(this),this.section.col[this.colIndex].addCell(this),!this.merged)){for(var c=this.section.row[this.rowIndex].$current,d=c.children("td"),e=this.colIndex-1;;){if(!(e>-1)){c.prepend(this.$current);break}if(0!==d.eq(e).length){d.eq(e).after(this.$current);break}e--}this.section.row[this.rowIndex].$current.append(this.$current)}}},function(){j(E,d),h(),k(c.$origin,G),l(c.$origin,G),r(),m(C),c.$origin.after(G),c.$origin.remove(),x(),y()}(),n(c["public"],{setWidth:s,setHeight:t,setRecountByResize:u,recount:x,view:{thead:H.thead,tbody:H.tbody,tfoot:H.tfoot},row:e,col:f,cell:g,addRowData:v,removeAllData:w})}}(ba("grid")),function(c){c.init=function(d,e){function f(a){for(var b,c=0,d=a.length;d>c;c++)if(b=a[c].name.split("."),b=b[b.length-1].toLowerCase(),!b||void 0===P.fileFilter[b])return!1;return!0}function g(a){var b=0,c=a.length;if(c+S.length>P.maxLength)Y.error.call(d["public"],"length-error",P.maxLength);else if(f(a)){for(var e=[],g=[],h=0;c>b;b++)a[b].size>1024*P.maxSize?e.push(a[b].name):S.some(function(c){return c.name===a[b].name&&c.size===a[b].size})?g.push(a[b].name):(S.push(a[b]),X.fileAdd(a[b]),h++);g.length>0&&Y.error.call(d["public"],"repeat-error",g),e.length>0&&Y.error.call(d["public"],"size-error",P.maxSize,e)}else Y.error.call(d["public"],"type-error")}function h(){var a;""!==R.val()&&("form"!==R.parent().get(0).nodeName.toLowerCase()&&(a=b("<form />"),R.wrap(a)),a=R.parent(),a.get(0).reset())}function i(){g(this.files),h()}function m(){function c(){w()===S.length?j.html('<span class="c-success">全部文件已上传完毕，共 '+w()+" 个"+(0!==x()?"，失败 "+x()+" 个":"")+"</span>"):j.html("已上传文件 "+w()+" 个"+(0!==x()?"，失败 "+x()+" 个":""))}var e,f=b('<div class="'+O+'-full-nofile"><button class="btn btn-blue btn-solid" ud2-file-add><i class="ico ico-group-file"></i> 添加文件</button><em>拖拽文件上传 / 长按CTRL键可多选上传</em></div>'),h=b('<div class="'+O+'-full-drag">请松开鼠标按钮，文件将进入待上传队列</div>'),i=b('<div class="'+O+'-full-list"><div class="'+O+'-full-add" ud2-file-add><div><i class="ico ico-hollow-plus"></i><em>继续添加文件</em></div></div></div>'),j=b('<div class="'+O+'-full-tools"><button class="btn btn-solid">确定上传</button><button class="btn btn-solid">清空列表</button></div>');y(i,O+"-full"),i.after(f).after(h).after(j),e=Q.find("["+O+"-add]"),z(e),B(j.children().eq(0)),C(j.children().eq(1)),D(function(c){var d,e=b('<div class="'+O+'-full-figure"><div class="'+O+'-full-img"><img ondragstart="return false;" /></div>'+(P.fileRename?'<div class="'+O+'-full-rename"><input type="text" value="'+c.name.substring(0,P.fileRenameLength)+'" maxlength="'+P.fileRenameLength+'" /></div>':"<div>"+c.name+"</div>")+'<div class="'+O+'-full-close"></div><div class="'+O+'-full-progress"></div></div>'),g=e.find("input"),h=e.children("."+O+"-full-close");1===S.length&&(f.fadeOut(200),i.fadeIn(200),j.fadeIn(200)),/^image\/(png|jpeg|gif|bmp|svg)/.test(c.type)?(d=new FileReader,d.readAsDataURL(c),d.addEventListener("loadend",function(){e.find("img").attr("src",d.result)})):(e.find("img").attr("src","data:image/svg+xml;base64,77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjxzdmcgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDEzOCAxMTgiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEzOCAxMTg7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnB7ZmlsbDojZmZmO30NCjwvc3R5bGU+DQoJPHBhdGggY2xhc3M9InAiIGQ9Ik05MS42LDQzLjJjLTEuMi0xLjctMy0zLjctNC45LTUuNmMtMS45LTEuOS0zLjktMy42LTUuNi00LjljLTIuOS0yLjEtNC4zLTIuNC01LjEtMi40SDQ4LjUNCgkJYy0yLjUsMC00LjUsMi00LjUsNC41djQ4LjJjMCwyLjUsMiw0LjUsNC41LDQuNWg0MS4xYzIuNSwwLDQuNS0yLDQuNS00LjVWNDguM0M5NCw0Ny41LDkzLjgsNDYuMSw5MS42LDQzLjJ6IE04NC4zLDQwLjINCgkJYzEuNywxLjcsMy4xLDMuMyw0LjEsNC41aC04LjZ2LTguNkM4MSwzNy4xLDgyLjUsMzguNSw4NC4zLDQwLjJMODQuMyw0MC4yeiBNOTAuNCw4My4xYzAsMC41LTAuNCwwLjktMC45LDAuOUg0OC41DQoJCWMtMC41LDAtMC45LTAuNC0wLjktMC45VjM0LjljMC0wLjUsMC40LTAuOSwwLjktMC45YzAsMCwyNy43LDAsMjcuNywwdjEyLjVjMCwxLDAuOCwxLjgsMS44LDEuOGgxMi41VjgzLjF6Ii8+DQoJPHBhdGggY2xhc3M9InAiIGQ9Ik04MS41LDc2LjloLTI1Yy0xLDAtMS44LTAuOC0xLjgtMS44YzAtMSwwLjgtMS44LDEuOC0xLjhoMjVjMSwwLDEuOCwwLjgsMS44LDEuOA0KCQlDODMuMyw3Ni4xLDgyLjUsNzYuOSw4MS41LDc2Ljl6Ii8+DQoJPHBhdGggY2xhc3M9InAiIGQ9Ik04MS41LDY5LjdoLTI1Yy0xLDAtMS44LTAuOC0xLjgtMS44YzAtMSwwLjgtMS44LDEuOC0xLjhoMjVjMSwwLDEuOCwwLjgsMS44LDEuOA0KCQlDODMuMyw2OC45LDgyLjUsNjkuNyw4MS41LDY5Ljd6Ii8+DQoJPHBhdGggY2xhc3M9InAiIGQ9Ik04MS41LDYyLjZoLTI1Yy0xLDAtMS44LTAuOC0xLjgtMS44YzAtMSwwLjgtMS44LDEuOC0xLjhoMjVjMSwwLDEuOCwwLjgsMS44LDEuOA0KCQlDODMuMyw2MS44LDgyLjUsNjIuNiw4MS41LDYyLjZ6Ii8+DQo8L3N2Zz4="),e.find("img").css("background","#3f99d5")),e.data("file",c),c.element=e,A(h,c),P.fileRename&&(c.newname=c.name,g.bind(N,function(a){a.preventDefault(),b(this).select()}).bind("blur",function(){c.newname=b(this).val()})),i.prepend(e),a.setTimeout(function(){e.addClass(O+"-full-figure-on")},150)}),E(function(b){var c=S.indexOf(b);S.splice(c,1),b.element.removeClass(O+"-full-figure-on"),a.setTimeout(function(){b.element.remove()},100),0===S.length&&(f.show(),i.hide(),j.hide())}),G(function(){i.children().not("["+O+"-add]").remove(),f.show(),i.hide(),j.hide()}),H(function(a,b){var c=a.element.find("."+O+"-full-progress");c.css("width",b+"%"),c.html(b+"%")}),F(function(){i.find("["+O+"-add]").hide(),i.find("."+O+"-full-close").hide(),i.find("."+O+"-full-figure input").attr("readonly","readonly"),j.html("文件开始上传...")}),I(function(a,b){u();var e=Y.done.call(d["public"],a,b);e?b.element.addClass("success"):(v(),b.element.addClass("fail"),Y.error.call(d["public"],"server-return-error",b.name)),c()}),J(function(a,b){u(),v(),b.element.addClass("fail"),Y.fail.call(d["public"],a,b),Y.error.call(d["public"],"server-error",b.name),c()}),Q.bind("dragenter",function(){0===T&&Q.addClass("ud2-file-full-dragenter")}),h.bind("dragleave",function(){0===T&&Q.removeClass("ud2-file-full-dragenter")}).bind("dragover",function(a){0===T&&(a.preventDefault(),Q.addClass("ud2-file-full-dragenter"))}).bind("drop",function(a){if(0===T){a.preventDefault(),a=a.originalEvent;var b=a.dataTransfer&&a.dataTransfer.files||a.target&&a.target.files;g(b),Q.removeClass("ud2-file-full-dragenter")}})}function o(){switch(R.attr("multiple","multiple"),P.type){case"full":m();break;case"base":break;case"single":break;case"custom":}}function p(a){var c=new FormData,e=P.url.upload;c.append("file",a),P.fileRename&&(e+="?newname="+a.newname+"&t="+ +new Date),b.ajax({type:"POST",url:e,data:c,contentType:!1,processData:!1,xhr:function(){var c=b.ajaxSettings.xhr();return c.upload&&c.upload.addEventListener("progress",function(b){var c=parseInt(b.loaded/b.total*100);X.progress(a,c)},!1),c}}).done(function(b){X.done(b,a),w()===S.length&&Y.complete.call(d["public"])}).fail(function(b){X.fail(b,a),w()===S.length&&Y.complete.call(d["public"])})}function q(a){return Y.error=a,d["public"]}function r(a){return Y.complete=a,d["public"]}function s(a){return Y.done=a,d["public"]}function t(a){return Y.fail=a,d["public"]}function u(){U++}function v(){V++}function w(){return U}function x(){return V}function y(a,b){return b&&W.isString(b)&&Q.addClass(b),W.isJQuery(a)&&Q.append(a),d["public"]}function z(a){return W.isJQuery(a)&&Z(a,{stopPropagation:!0}).setTap(function(){0===T&&R.trigger("click")}),d["public"]}function A(a,b){return W.isJQuery(a)&&Z(a,{stopPropagation:!0}).setTap(function(){0===T&&X.fileRemove.call(this,b)}),d["public"]}function B(a){return W.isJQuery(a)&&Z(a,{stopPropagation:!0}).setTap(function(){if(0===T&&0!==S.length){for(var a=(new FormData,0),b=S.length;b>a;a++)p(S[a]);X.fileUpload.call(this)}}),d["public"]}function C(a){return W.isJQuery(a)&&Z(a,{stopPropagation:!0}).setTap(function(){0===T&&(S.length=0,X.fileClear.call(this))}),d["public"]}function D(a){return W.isFunction(a)&&(X.fileAdd=a),d["public"]}function E(a){return W.isFunction(a)&&(X.fileRemove=a),d["public"]}function F(a){return W.isFunction(a)&&(X.fileUpload=a),d["public"]}function G(a){return W.isFunction(a)&&(X.fileClear=a),d["public"]}function H(a){return W.isFunction(a)&&(X.progress=a),d["public"]}function I(a){return W.isFunction(a)&&(X.done=a),d["public"]}function J(a){return W.isFunction(a)&&(X.fail=a),d["public"]}function K(a){return P.url.upload=a,d["public"]}function L(){return S}function M(){R.bind("change",i)}var O=c["class"],P={type:function(){var a=d.attr("type");return"full"!==a&&"base"!==a&&"single"!==a&&"custom"!==a&&(a="full"),a}(),maxLength:parseInt(d.attr("maxlength"))||20,maxSize:parseInt(d.attr("maxsize"))||2048,fileRename:function(){var a=d.attr("rename");return a=""===a||"false"===a?!1:!0}(),fileRenameLength:parseInt(d.attr("rename-length"))||60,fileFilter:function(){var a=d.attr("filter")||"",b="png|jpg|gif|bmp|svg|ico|html|js|cs|vb|css|less|scss|sass|mp3|mp4|wav|avi|ogg|mov|wmv|webm|flv|swf|txt|pdf|doc|docx|xls|xlsx|ppt|pptx|ett|wpt|dpt|rar|zip|iso",c=0,e=0;for(a=new RegExp("^(("+b+"),)*("+b+")$").test(a)?a:"all",a="all"===a?b.split("|"):a.split(","),e=a.length;e>c;c++)a[a[c]]=a[c];return a}(),url:{upload:"",fileList:"",fileRename:"",fileRemove:""}},Q=b('<div class="'+O+'"><input type="file" /></div>'),R=Q.children("input"),S=[],T=0,U=0,V=0,X={fileAdd:b.noop,fileRemove:b.noop,fileUpload:b.noop,fileClear:b.noop,progress:b.noop,done:b.noop,fail:b.noop},Y={error:function(a,b,c){switch(a){case"length-error":da("您选择的文件数量已经超过最大个数限制，该限制为 "+b+" 个",4);break;case"type-error":da("您选择的文件类型不符合要求，请您重新选择文件",4);break;case"size-error":da("您选择的文件超出 "+b+"KB 限制，尺寸不符的文件："+c.join("、"),4);break;case"repeat-error":da("您选择的文件已存在于列表中，重复的文件："+c.join("、"),3);break;case"server-error":da("您的文件 "+b+" 已被阻止，请检查您的文件",4);break;case"server-return-error":da("文件 "+b+" 被服务器退回，请检查您的文件是否符合要求",4)}},complete:b.noop,done:b.noop,fail:b.fail};return function(){j(P,e),k(d.$origin,Q),l(d.$origin,Q),R.attr("accept",d.$origin.attr("accept")),d.$origin.after(Q),d.$origin.remove(),o(),M()}(),n(d["public"],{bind:{fileAddBtn:z,fileRemoveBtn:A,fileAddFn:D,fileRemoveFn:E,upload:B,uploadFn:F,clear:C,clearFn:G},setUploadUrl:K,setError:q,setComplete:r,setDone:s,setFail:t,getUpfiles:L})}}(ba("file"));return function(){r.ready(function(){o=b("body"),v.safari&&p.body.addEventListener("touchstart",b.noop),T.fire(),S=!0,r.bind(N,function(a){var b="ctrlCloseEvent",c=a.type,d=r.data(b);d&&c!==d||(r.data(b,c),V.fire(a.target)),"mousedown"===c&&r.data(b,null)})}),q.bind("resize orientationchange",function(){U.fire()}),T.add(_.createAll)}(),n(_,{regex:x,support:v,type:W,convert:X,form:Y,animateFrame:w,event:Z,eventMouseWheel:$,ctrl:aa,ctrlGroup:ba,scroll:ca,message:da,dialog:ea})}(window,jQuery);
/* lasted： 2015-12-16 04:42:29 */