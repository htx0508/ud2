/*! ud2 - v0.0.0
 * (c) 2015 Peak(peak@udtwo.com) */
if("undefined"==typeof $)throw new Error("ud2库需要JQuery支持");var ud2=function(a,b){"use strict";function c(a){return function(b){return{}.toString.call(b)==="[object "+a+"]"}}function d(a){return c("Object")(a)}function e(a){return c("String")(a)}function f(a){return a instanceof b}function g(a){if(a=h(a),0===a.length)return K.clone();if(1===a.length)return a.attr(t+this.name+"-state")?void 0:a;for(var b=a.length,c=0;b>c;c++)this.create(a.eq(c))}function h(c){return c||(c=b()),e(c)&&(c=b(c)),c===a&&(c=b(a)),f(c)||(c=b()),c}function i(a,c){a=h(a),a.each(function(){c(b(this))})}function j(a){var b=(a.attr(r)||"").split(" "),c=[];return b.forEach(function(a){0!==a.length&&c.push(a)}),c}function k(a,b){var c=j(a);return c.indexOf(b)>-1?!0:!1}function l(a,b){if(P[m(b)]&&!k(a,b)){var c=j(a);c.push(b),a.attr(r,c.join(" "))}}function m(a){var b=a.split("-"),c=1,d=b.length;if(d>1)for(;d>c;c++)b[c].length>0&&(b[c]=b[c].substr(0,1).toUpperCase()+b[c].substr(1));return b.join("")}function n(a,b){if(d(b))for(var c in b)void 0!==a[c]&&(a[c]=b[c])}var o=a.document,p=b(a),q=b(o),r="ud2",s="-",t=[r,s].join(""),u=(" -webkit- -moz- -o- -ms- ".split(" "),function(){var b={},c=o.createElement("div");return b.safari=/constructor/i.test(a.HTMLElement),b.touch="ontouchstart"in a||a.DocumentTouch&&o instanceof DocumentTouch,b.pointer=a.navigator.pointerEnabled,b.msPointer=a.navigator.msPointerEnabled,b.touchAction=void 0!==c.style.touchAction||void 0!==c.style.msTouchAction||!1,b.perspective=void 0!==c.style.perspective||void 0!==c.style.msPerspective||void 0!==c.style.mozPerspective||void 0!==c.style.webkitPerspective||!1,b.transition=void 0!==c.style.transition||void 0!==c.style.msTransition||void 0!==c.style.mozTransition||void 0!==c.style.webkitTransition||void 0!==c.style.oTransition||!1,b.animation=void 0!==c.style.animation||void 0!==c.style.mozAnimation||void 0!==c.style.webkitAnimation||void 0!==c.style.oAnimation||!1,b}()),v=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)},w={date:/^(?:[12]\d{3}([\.\-\/])(?:(?:0?[13578]|1[02])\1(?:0?[1-9]|[12]\d|3[01])|(?:0?[469]|11)\1(?:0?[1-9]|[12]\d|30)|0?2\1(?:0?[1-9]|1\d|2[0-8]))$|[12]\d(?:[02468][048]|[13579][26])([\.\-\/])(?:(?:0?[13578]|1[02])\2(?:0?[1-9]|[12]\d|3[01])|(?:0?[469]|11)\2(?:0?[1-9]|[12]\d|30)|0?2\2(?:0?[1-9]|1\d|2[0-9])))$/},x=function(){var a=0;return{create:function(){return"nonamed-"+a++}}}(),y=Date.now||function(){return(new Date).getTime()},z=u.pointer?"pointerdown":"MSPointerDown",A=u.pointer?"pointermove":"MSPointerMove",B=u.pointer?"pointerup":"MSPointerUp",C="touchstart",D="touchmove",E="touchend",F="touchcancel",G="mousedown",H="mousemove",I="mouseup",J="mouseout",K=b("<div />"),L=(b("<a />"),b("<span />"),function(){return!1}),M=b.Callbacks(),N=(b.Callbacks(),function(a,c){function d(a,b){b?a.css({"-ms-touch-action":"none","touch-action":"none"}):a.css({"-ms-touch-action":"auto","touch-action":"auto"}),u.touchAction||(b?a.bind("selectstart",L):a.unbind("selectstart",L))}function e(a){return K.pan=a,w}function f(a){return K.tap=a,w}function g(a){return K.press=a,w}function h(a){return K.swipeLeft=a,w}function j(a){return K.swipeRight=a,w}function k(a){return K.swipeTop=a,w}function l(a){return K.swipeBottom=a,w}function m(a){return K.down=a,w}function o(a){return K.up=a,w}function p(){N.forEach(function(){arguments[0].bind()})}function r(){N.forEach(function(){arguments[0].unbind()})}function s(a,b){this.del=!1,this.id=a,this.downScreenX=b?b.screenX:0,this.downScreenY=b?b.screenY:0,this.downPageX=b?b.pageX:0,this.downPageY=b?b.pageY:0,this.downClientX=b?b.clientX:0,this.downClientY=b?b.clientY:0,this.moveScreenX=this.downScreenX,this.moveScreenY=this.downScreenY,this.movePageX=this.downPageX,this.movePageY=this.downPageY,this.moveClientX=this.downClientX,this.moveClientY=this.downClientY}function v(a){function b(a){0===c()&&(Q.id=a,Q.time=y())}function c(){var a=0;for(var b in P)P[b].del||a++;return a}function e(){for(var a in P)P[a].del&&delete P[a]}function f(a){x.stopPropagation&&a.stopPropagation();var d=a.originalEvent,e=d.pointerId;b(e),0===c()&&(q.bind(O[1],g),q.bind(O[2],h)),(!P[e]||P[e].del)&&(P[e]=new s(e,d),o(a,e))}function g(a){x.stopPropagation&&a.stopPropagation(),a.preventDefault();var b=a.originalEvent,c=b.pointerId;P[c]&&(P[c].setMove(b),p(a,c))}function h(a){x.stopPropagation&&a.stopPropagation();var b=a.originalEvent,d=b.pointerId;P[d]&&(r(a,d),P[d].del=!0,0===c()&&(q.unbind(O[1],g),q.unbind(O[2],h)))}function i(a){x.stopPropagation&&a.stopPropagation();var d=a.originalEvent,e=d.changedTouches;0===c()&&(N.bind(O[4],j),N.bind(O[5],k),N.bind(O[6],k)),b(e[0].identifier);for(var f=0,g=e.length;g>f;f++)(!P[e[f].identifier]||P[e[f].identifier].del)&&(P[e[f].identifier]=new s(e[f].identifier,e[f])),o(a,e[f].identifier)}function j(a){x.stopPropagation&&a.stopPropagation(),a.preventDefault();for(var b=a.originalEvent,c=b.changedTouches,d=0,e=c.length;e>d;d++)P[c[d].identifier]&&P[c[d].identifier].setMove(c[d]),p(a,c[d].identifier)}function k(a){x.stopPropagation&&a.stopPropagation();for(var b=a.originalEvent,d=b.changedTouches,e=0,f=d.length;f>e;e++)r(a,d[e].identifier),P[d[e].identifier].del=!0;0===c()&&(N.unbind(O[4],j),N.unbind(O[5],k),N.unbind(O[6],k))}function l(a){x.stopPropagation&&a.stopPropagation();var c=a.originalEvent;b(0),P[0]=new s(0,c),o(a,0),q.bind(O[8],m),q.bind(O[9],n)}function m(a){x.stopPropagation&&a.stopPropagation(),a.stopPropagation();var b=a.originalEvent;P[0]&&(P[0].setMove(b),p(a,0))}function n(a){x.stopPropagation&&a.stopPropagation(),P[0]&&(r(a,0),void 0!==P[0]&&P[0].del===!1&&(P[0].del=!0),q.unbind(O[8],m),q.unbind(O[9],n))}function o(b,c){R=!1;for(var d=a.parents(),e=d.length,f=0;e>f;f++)if("1"===d.eq(f).attr(t+"scroll-runing")){R=!0;break}K.down.call(a,c)}function p(b,c){var d=P[c].getMoveLength();b.preventDefault(),K.pan.call(a,d,c)}function r(b,c){var d=null,f=P[c].getMoveLength(),g={x:Math.abs(f.x),y:Math.abs(f.y)};M&&y()-M.time<500&&"touchend"===M.type&&"mouseup"===b.type||(M={time:y(),type:b.type},Q.id===c&&(d=new Date-Q.time,Q.id=null,Q.time=null),d&&(g.x<x.pointerValidLength&&g.y<x.pointerValidLength&&(R||(d<x.tapMaxTime?K.tap.call(a):K.press.call(a))),g.x>=x.pointerValidLength&&g.x>=g.y&&d<x.swipeMaxTime&&(f.x<0?(b.preventDefault(),K.swipeLeft.call(a)):(b.preventDefault(),K.swipeRight.call(a))),g.y>=x.pointerValidLength&&g.y>=g.x&&d<x.swipeMaxTime&&(f.y<0?(b.preventDefault(),K.swipeTop.call(a)):(b.preventDefault(),K.swipeBottom.call(a)))),K.up.call(a,c),e())}function v(a){u.pointer||u.msPointer?a?N.bind(O[0],f):N.unbind(O[0],f):a?(N.bind(O[3],i),N.bind(O[7],l)):(N.unbind(O[3],i),N.unbind(O[7],l)),a?d(N,!0):d(N,!1)}function w(){S||(S=!0,v(!0))}function L(){S&&(S=!1,v(!1))}var N=a,O=[z,A,B,C,D,E,F,G,H,I,J],P={},Q={id:null,time:null},R=!1,S=!1;return function(){w();var b=a.find("a, img");b.bind("dragstart",function(a){a.preventDefault()})}(),{bind:w,unbind:L}}var w={},x={stopPropagation:!1,tapMaxTime:300,swipeMaxTime:500,pointerValidLength:5},K={pan:b.noop,tap:b.noop,press:b.noop,swipeLeft:b.noop,swipeRight:b.noop,swipeTop:b.noop,swipeBottom:b.noop,down:b.noop,up:b.noop},M=null,N=[];return s.prototype.setMove=function(a){a&&a.screenX&&(this.moveScreenX=a.screenX),a&&a.screenY&&(this.moveScreenY=a.screenY),a&&a.pageX&&(this.movePageX=a.pageX),a&&a.pageY&&(this.movePageY=a.pageY),a&&a.clientX&&(this.moveClientX=a.clientX),a&&a.clientY&&(this.moveClientY=a.clientY)},s.prototype.getMoveLength=function(){return{x:this.movePageX-this.downPageX,y:this.movePageY-this.downPageY}},function(){n(x,c),i(a,function(a){N.push(v(a))})}(),w={setPan:e,setTap:f,setPress:g,setSwipeLeft:h,setSwipeRight:j,setSwipeTop:k,setSwipeBottom:l,setDown:m,setUp:o,on:p,off:r}}),O=function(a,c){function d(a){return m.scroll=a,k}function e(a){return m.down=a,k}function f(a){return m.up=a,k}function g(){p.forEach(function(){arguments[0].bind()})}function h(){p.forEach(function(){arguments[0].unbind()})}function j(a){function b(b){b.stopPropagation(),b.preventDefault();var c=b.originalEvent,d=c.deltaY/100||c.wheelDelta/-120||(Math.abs(c.detail)>2?c.detail/3:c.detail)||0;m.scroll.call(a,d),d>0?m.down.call(a):m.up.call(a)}function c(){f||(f=!0,e.bind(o,b))}function d(){f&&(f=!1,e.unbind(o,b))}var e=a,f=!1;return function(){c()}(),{bind:c,unbind:d}}var k={},l={},m={scroll:b.noop,down:b.noop,up:b.noop},o="DOMMouseScroll mousewheel",p=[];return function(){n(l,c),i(a,function(a){p.push(j(a))})}(),k={setScroll:d,setDown:e,setUp:f,on:g,off:h}},P=function(){function a(){function a(){var a=b(this),d=j(a);d.forEach(function(b,d){var e=m(b),f=a.attr(t+b+"-state");f||c[e].create(a)})}var d=b("["+r+"]");d.each(a);for(var e in c)c[e]&&c[e].isControlsGroup&&c[e].findDocument()}var c={};return c.createAll=a,c}(),Q=function(a){var b,c;return b=h(a),0===b.length&&(b=K.clone()),b.length>1&&(b=b.eq(0)),c=b.attr(t+"name"),c||(c=x.create(),b.attr(t+"name",c)),{$origin:b,"public":{name:c}}},R=function(a){var c=[];return c.name=e(a)?a:"empty",c.controlName=m(a),c.isControlsGroup=!0,c.findDocument=b.noop,c.init=function(a,b){return a["public"]},c.create=function(a,b){if(a=g.call(this,a)){var c=Q(a);return this.push(c["public"]),this[c["public"].name]=c["public"],l(c.$origin,this.name),c.$origin.attr(t+this.name+"-state",!0),this.init(c,b),c["public"]}},P[c.name]=c,c},S=function(c,d){function e(){if(I.hasVertical){var a=0,b=0,c=0;if(a=P.height(),X.h=M.height(),X.ih=M.innerHeight(),X.sh=a-X.h,c=X.ih-2*I.barOffset,0!==X.h){var d=X.sh/(5*X.ih);d=1-(d>1?1:d),b=c*d,b=b<I.barMinLength?I.barMinLength:b,b=b>c?c:b,Y.h=b,Y.mh=c,Y.sh=c-b,R.height(b)}}if(I.hasHorizontal){var e=0,f=0,g=0;if(e=P.width(),X.w=M.width(),X.iw=M.innerWidth(),X.sw=e-X.w,g=X.iw-2*I.barOffset,0!==X.w){var d=X.sw/(5*X.iw);d=1-(d>1?1:d),f=g*d,f=f<I.barMinLength?I.barMinLength:f,f=f>g?g:f,Y.w=f,Y.mw=g,Y.sw=g-f,Q.width(f)}}}function f(){var a,b;if(u.transition){var c=P.css("transform");c=c.split(")")[0].split(", "),a=Math.round(+(c[12]||c[4])),b=Math.round(+(c[13]||c[5]))}else a=X.now.x,b=X.now.y;return{x:a,y:b}}function g(a){V!==a&&(V=a,M.attr(S,a?1:0),a?q():r())}function i(a,b){var c=b?"sh":"sw";return a/X[c]*Y[c]}function j(a,b){var c=b?"sh":"sw";return a/Y[c]*X[c]}function k(a,b,c,d){c=c||0,d=d||T.circular,u.transition?(l(d.css),m(c),P.css("transform","translate("+a+"px, "+b+"px)"+(u.perspective?" translateZ(0)":"")),R.css("transform","translate(0, "+i(-b,1)+"px)"+(u.perspective?" translateZ(0)":"")),Q.css("transform","translate("+i(-a,0)+"px, 0)"+(u.perspective?" translateZ(0)":"")),X.now={x:a,y:b}):0===c?(P.css({left:a,top:b}),R.css("top",i(-b,1)),Q.css("left",i(-a,0)),X.now={x:a,y:b}):o(a,b,c,d.fn)}function l(a){P.css("transition-timing-function",a),R.css("transition-timing-function",a+", ease-out"),Q.css("transition-timing-function",a+", ease-out")}function m(a){var b=parseInt(a);P.css("transition-duration",b+"ms"),R.css("transition-duration",b+"ms, 300ms"),Q.css("transition-duration",b+"ms, 300ms")}function o(a,b,c,d){function e(){var j,k,l,m=y();i>m?(m=(m-h)/c,l=d(m),j=(a-f)*l+f,k=(b-g)*l+g,X.now={x:j,y:k},P.css({left:j,top:k}),R.css("top",-k/X.sh*Y.sh),Q.css("left",-j/X.sh*Y.sh),V&&v(e)):V=!1}var f=X.now.x,g=X.now.y,h=y(),i=h+c;V=!0,e()}function q(){0===I.barState&&(Y.timer&&a.clearTimeout(Y.timer),u.transition?(Q.stop().fadeIn(200),R.stop().fadeIn(200)):(Q.show(),R.show()))}function r(){0===I.barState&&(L||J||V||(Y.timer&&a.clearTimeout(Y.timer),Y.timer=a.setTimeout(function(){u.transition?(Q.stop().fadeOut(500),R.stop().fadeOut(500)):(Q.hide(),R.hide())},1e3)))}function s(a,b,c,d,e,f){var g,h,i=a-b,j=Math.abs(i)/c;return d=-d,e=e||0,f=f||5e-4,g=a+j*j/(2*f)*(0>i?-1:1),h=j/f,d>g?(g=e?d-e/2.5*(j/8):d,i=Math.abs(g-a),h=i/j):g>0&&(g=e?e/2.5*(j/8):0,i=Math.abs(a)+g,h=i/j),{destination:Math.round(g),duration:h}}function w(){return V}function x(){var a=X.now.x,b=X.now.y;return e(),b<-X.sh&&(b=-X.sh),a<-X.sw&&(a=-X.sw),(a!==X.now.x||b!==X.now.y)&&k(a,b,300),H}function z(){e(),g(!0);var a=f();k(a.x,a.y),U.moved=!1,U.start=y(),U.startMove={x:X.now.x,y:X.now.y},U.lastMove={x:0,y:0}}function A(a){var b=y(),c=a.x,d=a.y,e=Math.abs(c),f=Math.abs(d),h=c-U.lastMove.x,i=d-U.lastMove.y,j=0,l=0;g(!0),U.lastMove={x:c,y:d},b-U.end>300&&W>e&&W>f||(U.moved||(U.moved=!0),I.hasVertical&&(l=i+X.now.y,(l>0||l<-X.sh)&&(l=l>0?0:-X.sh)),I.hasHorizontal&&(j=h+X.now.x,(j>0||j<-X.sw)&&(j=j>0?0:-X.sw)),(0!==h||0!==i)&&k(j,l),b-U.start>=300&&(U.start=b,U.startMove.x=j,U.startMove.y=l))}function B(){var a=X.now.x,b=X.now.y,c=a,d=b,e=null,f=null,h=y()-U.start,i=0;if(U.end=y(),!U.moved||!I.slowMoving)return void g(!1);if(300>h){var j=0,l=0;I.hasVertical&&(f=s(b,U.startMove.y,h,X.sh,I.bounce?X.h:0),d=f.destination,l=f.duration),I.hasHorizontal&&(e=s(a,U.startMove.x,h,X.sw,I.bounce?X.w:0),c=e.destination,j=e.duration),i=Math.max(j,l)}c!==a||d!==b?k(c,d,i):g(!1)}function C(a){var b=X.now.x,c=X.now.y,d=300;e(),a>0?c-=Math.round(X.h):0>a&&(c+=Math.round(X.h)),c>0||c<-X.sh?(g(!1),c>0&&(c=0),c<-X.sh&&(c=-X.sh)):g(!0),k(b,c,d)}function D(){this.move=0,J=!0,b(this).css("background",I.barHoverColor)}function E(){J=!1,r(),b(this).css("background",I.barColor)}function F(a,b){var c=b?X.now.x:j(-(a.x-this.move),0)+X.now.x,d=b?j(-(a.y-this.move),1)+X.now.y:X.now.y;b?(d>0&&(d=0),d<-X.sh&&(d=-X.sh),this.move=a.y):(c>0&&(c=0),c<-X.sw&&(c=-X.sw),this.move=a.x),k(c,d)}function G(){P.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){g(!1)}),I.recountByResize&&p.bind("resize orientationchange",x),M.bind("mouseenter",function(){0===I.barState&&(L=!0,q())}).bind("mouseleave",function(){0===I.barState&&(L=!1,r())}),I.isTouchMode&&N(M,{stopPropagation:!0}).setDown(z).setUp(B).setPan(A),I.isMouseWheelMode&&O(M).setScroll(C),I.isScrollMode&&(N(R,{stopPropagation:!0}).setPan(function(a){F.call(this,a,1)}).setDown(D).setUp(E),N(Q,{stopPropagation:!0}).setPan(function(a){F.call(this,a,0)}).setDown(D).setUp(E))}var H={},I={recountByResize:!1,barState:0,barSize:6,barMinLength:30,barOffset:1,barColor:"rgba(0,0,0,.4)",barHoverColor:"rgba(0,0,0,.6)",barBorderRadiusState:!0,isMouseWheelMode:!0,isTouchMode:!0,isScrollMode:!1,mousewheelLength:100,hasHorizontal:!1,hasVertical:!0,slowMoving:!0},J=!1,L=!1,M=h(c).eq(0),P=K.clone().addClass(t+"scroll-wrapper"),Q=K.clone().addClass(t+"scroll-bar"),R=K.clone().addClass(t+"scroll-bar"),S=t+"scroll-runing",T={quadratic:{css:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(a){return a*(2-a)}},circular:{css:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(a){return Math.sqrt(1- --a*a)}}},U={id:null,start:0,end:0,moved:!1,startMove:{x:0,y:0},lastMove:{x:0,y:0}},V=!1,W=5,X={h:0,ih:0,sh:0,w:0,iw:0,sw:0,now:{x:0,y:0},isMoved:!1},Y={h:0,mh:0,sh:0,w:0,mw:0,sw:0,timer:null};return function(){n(I,d);var a=M.contents();0===a.length?M.append(P):(a.wrapAll(P),P=M.children("."+t+"scroll-wrapper")),P.css("padding",M.css("padding-top")+" "+M.css("padding-right")+" "+M.css("padding-bottom")+" "+M.css("padding-left")),M.addClass("ud2-scroll"),I.hasVertical&&M.prepend(R),I.hasHorizontal&&M.prepend(Q),R.css({top:I.barOffset,right:I.barOffset,width:I.barSize,background:I.barColor}),Q.css({left:I.barOffset,bottom:I.barOffset,height:I.barSize,background:I.barColor}),I.barBorderRadiusState&&(R.css("border-radius",I.barSize/2),Q.css("border-radius",I.barSize/2)),1===I.barState&&(R.show(),Q.show()),e(),G()}(),H={$content:P,getScrollingState:w,recountScrollPosition:x}};return function(){q.ready(function(){u.safari&&o.body.addEventListener("touchstart",b.noop),M.fire()}),M.add(P.createAll)}(),P.reg=w,P.support=u,P.animateFrame=v,P.event=N,P.eventMouseWheel=O,P.ctrl=Q,P.ctrlGroup=R,P.scroll=S,P}(window,jQuery);
/* lasted： 2015-10-17 03:36:08 */