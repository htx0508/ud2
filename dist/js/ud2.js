/*! ud2 - v1.0.0
 * (c) 2016 Peak(peak@udtwo.com)
 */
if("undefined"==typeof $)throw new Error("ud2库需要JQuery支持");var ud2=function(a,b){"use strict";function c(a,b){K.isObject(a)||(a={}),K.isObject(b)||(b={});for(var c in b)a[c]=b[c];return a}function d(a){var b=(a.attr(k)||"").split(" "),c=[];return b.forEach(function(a){0!==a.length&&c.push(a)}),c}function e(a){var b=a.split("-"),c=1,d=b.length;if(d>1)for(;d>c;c++)b[c].length>0&&(b[c]=b[c].substr(0,1).toUpperCase()+b[c].substr(1));return b.join("")}function f(a){return K.isJQuery(a)||(a=b(a)),a}var g,h=a.document,i=b(a),j=b(h),k="ud2",l="-",m=k+l,n=(" -webkit- -moz- -o- -ms- ".split(" "),a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)},{date:/^(?:[12]\d{3}([\.\-\/])(?:(?:0?[13578]|1[02])\1(?:0?[1-9]|[12]\d|3[01])|(?:0?[469]|11)\1(?:0?[1-9]|[12]\d|30)|0?2\1(?:0?[1-9]|1\d|2[0-8]))$|[12]\d(?:[02468][048]|[13579][26])([\.\-\/])(?:(?:0?[13578]|1[02])\2(?:0?[1-9]|[12]\d|3[01])|(?:0?[469]|11)\2(?:0?[1-9]|[12]\d|30)|0?2\2(?:0?[1-9]|1\d|2[0-9])))$/,mail:/^([\w-\.]+)@(([\w-]+\.)+)([a-zA-Z]{2,4})$/,phone:/^[1][3458][0-9]{9}$/,identityCard:/^(11|12|13|14|15|21|22|23|31|32|33|34|35|36|37|41|42|43|44|45|46|50|51|52|53|54|61|62|63|64|65|71|81|82|97|98|99)[0-9]{4}((?:19|20)?(?:[0-9]{2}(?:(?:0[13578]|1[12])(?:0[1-9]|[12][0-9]|3[01])|(?:0[469]|11)(?:0[1-9]|[12][0-9]|30)|02(?:0[1-9]|1[0-9]|2[0-8]))|(?:[02468][048]|[13579][26])0229)[0-9]{3}[\dxX])$/,loginName:/^[a-zA-Z][a-zA-Z0-9]+$/}),o=Date.now||function(){return(new Date).getTime()},p=a.navigator.pointerEnabled,q=p?"pointerdown":"MSPointerDown",r=p?"pointermove":"MSPointerMove",s=p?"pointerup":"MSPointerUp",t=p?"pointercancel":"MSPointerCancel",u="touchstart",v="touchmove",w="touchend",x="touchcancel",y="mousedown",z="mousemove",A="mouseup",B="mouseout",C="click",D=1e8,E=b("<div />"),F=(b("<a />"),function(){}),G=/(^[a-z0-9]{1,}|[A-Z][a-z0-9]{0,})/g,H=[],I=!1,J={pageReady:b.Callbacks(),pageResize:b.Callbacks(),ctrlClose:b.Callbacks()},K=function(){function a(a){return function(b){return{}.toString.call(b)==="[object "+a+"]"}}function c(b){return a("Object")(b)}function d(b){return a("Function")(b)}function e(b){return a("String")(b)}function f(b){return a("Number")(b)}function g(a){return/^([1-9]\d+|[0-9])$/.test(a)}function h(a){return a instanceof b}return{isType:a,isObject:c,isFunction:d,isString:e,isNumber:f,isNaturalNumber:g,isJQuery:h}}(),L=(function(){function a(a){return isNaturalNumber(a)?+a:0}return{toNaturalNumber:a}}(),function(){function a(a){return K.isString(a)?a:""}function b(b,c,d){return b=a(b),c=c||Number.MAX_VALUE,"undefined"!=typeof d?(c>d&&(d=c),b.length<=d&&b.length>=c):b.length===c}function c(b,c){return b=a(b),c=c||0,b.length>=c}function d(b,c){return b=a(b),c=c||Number.MAX_VALUE,b.length<=c}function e(b){return b=a(b),n.phone.test(b)}function f(b){return b=a(b),n.mail.test(b)}function g(b){return b=a(b),n.date.test(b)}function h(b){return b=a(b),n.loginName.test(b)}function i(b){if(b=a(b),b=b.toUpperCase(),n.identityCard.test(b)){if(18===b.length){for(var c=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],d=["1","0","X","9","8","7","6","5","4","3","2"],e=b.split(""),f=0,g=0;17>g;g++)f+=e[g]*c[g];var h=d[f%11];if(h!==e[17])return!1}return!0}return!1}return{isLength:b,isMinLength:c,isMaxLength:d,isPhone:e,isMail:f,isDate:g,isLoginName:h,isIdentityCard:i}}(),function(){var b={},c=h.createElement("div"),d=a.navigator.userAgent;return b.safari=/constructor/i.test(a.HTMLElement),b.mobile=!!d.match(/mobile|mobi|mini/i),b.android=d.indexOf("Android")>-1,b.touch="ontouchstart"in a||a.DocumentTouch&&h instanceof DocumentTouch,b.pointer=p,b.msPointer=a.navigator.msPointerEnabled,b.touchAction=void 0!==c.style.touchAction||void 0!==c.style.msTouchAction||!1,b.perspective=void 0!==c.style.perspective||void 0!==c.style.msPerspective||void 0!==c.style.mozPerspective||void 0!==c.style.webkitPerspective||!1,b.transition=void 0!==c.style.transition||void 0!==c.style.msTransition||void 0!==c.style.mozTransition||void 0!==c.style.webkitTransition||void 0!==c.style.oTransition||!1,b.animation=void 0!==c.style.animation||void 0!==c.style.mozAnimation||void 0!==c.style.webkitAnimation||void 0!==c.style.oAnimation||!1,b}()),M=function(d,e){function h(a){return N.pan=a,K}function i(a){return N.tap=a,K}function k(a){return N.press=a,K}function l(a){return N.swipeLeft=a,K}function n(a){return N.swipeRight=a,K}function p(a){return N.swipeTop=a,K}function D(a){return N.swipeBottom=a,K}function G(a){return N.down=a,K}function H(a){return N.up=a,K}function I(a,b){function d(a){a&&(a.screenX&&(l.moveScreenX=a.screenX),a.screenY&&(l.moveScreenY=a.screenY),a.pageX&&(l.movePageX=a.pageX),a.pageY&&(l.movePageY=a.pageY),a.clientX&&(l.moveClientX=a.clientX),a.clientY&&(l.moveClientY=a.clientY))}function e(){return{x:l.movePageX-l.downPageX,y:l.movePageY-l.downPageY}}var f=b?b.screenX:0,g=b?b.screenY:0,h=b?b.pageX:0,i=b?b.pageY:0,j=b?b.clientX:0,k=b?b.clientY:0,l={del:!1,id:a,downScreenX:f,downScreenY:g,downPageX:h,downPageY:i,downClientX:j,downClientY:k,moveScreenX:f,moveScreenY:g,movePageX:h,movePageY:i,moveClientX:j,moveClientY:k};return c(l,{setMove:d,getMoveLength:e})}function J(b){function d(a){0===e()&&(Z.id=a,Z.time=o())}function e(){var a=0;for(var b in Y)Y[b].del||a++;return a}function f(){for(var a in Y)Y[a].del&&delete Y[a]}function F(){if(L.mobile){var b,c=E.clone().css({position:"fixed",top:0,right:0,left:0,bottom:0,"z-index":999999999});g.append(c),c.on(u,function(a){a.stopPropagation(),a.preventDefault()}).on(C,function(d){d.stopPropagation(),d.preventDefault(),b&&a.clearTimeout(b),c.remove()}),b=a.setTimeout(function(){c.remove()},500)}}function J(a){M.stopPropagation&&a.stopPropagation();var b=a.originalEvent,c=b.pointerId;d(c),0===e()&&(j.bind(X[1],P),j.bind(X[2],Q)),Y[c]&&!Y[c].del||(Y[c]=I(c,b),S(a,c))}function P(a){M.stopPropagation&&a.stopPropagation(),a.preventDefault();var b=a.originalEvent,c=b.pointerId;Y[c]&&(Y[c].setMove(b),T(a,c))}function Q(a){M.stopPropagation&&a.stopPropagation();var b=a.originalEvent,c=b.pointerId;Y[c]&&(U(a,c),Y[c].del=!0,0===e()&&(j.unbind(X[1],P),j.unbind(X[2],Q)))}function R(a){}function S(a,c){$=!1;for(var d=b.parents(),e=d.length,f=0;e>f;f++)if("1"===d.eq(f).attr(m+"scroll-runing")){$=!0;break}N.down.call(b,c)}function T(a,c){var d=Y[c].getMoveLength();a.preventDefault(),N.pan.call(b,d,c)}function U(a,c){var d=null,e=Y[c].getMoveLength(),g={x:Math.abs(e.x),y:Math.abs(e.y)};O&&o()-O.time<500&&"touchend"===O.type&&"mouseup"===a.type||(O={time:o(),type:a.type},Z.id===c&&(d=new Date-Z.time,Z.id=null,Z.time=null),d&&(g.x<M.pointerValidLength&&g.y<M.pointerValidLength&&($||(d<M.tapMaxTime?(F(),N.tap.call(b)):N.press.call(b))),g.x>=M.pointerValidLength&&g.x>=g.y&&d<M.swipeMaxTime&&(e.x<0?(a.preventDefault(),N.swipeLeft.call(b)):(a.preventDefault(),N.swipeRight.call(b))),g.y>=M.pointerValidLength&&g.y>=g.x&&d<M.swipeMaxTime&&(e.y<0?(a.preventDefault(),N.swipeTop.call(b)):(a.preventDefault(),N.swipeBottom.call(b)))),N.up.call(b,c),f())}function V(a){var c=L.pointer||L.msPointer;a?(c?b.on(X[0],J):(b.on(X[4],R),b.on(X[8],mouseDown)),b.css({"-ms-touch-action":"none","touch-action":"none","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"})):(c?b.off(X[0],J):(b.off(X[4],R),b.off(X[8],mouseDown)),b.css({"-ms-touch-action":"auto","touch-action":"auto","-webkit-user-select":"text","-moz-user-select":"text","-ms-user-select":"text","user-select":"text"}))}function W(){_||(_=!0,V(!0))}var X=[q,r,s,t,u,v,w,x,y,z,A,B],Y={},Z={id:null,time:null},$=!1,_=!1;return function(){W()}(),c(K,{setPan:h,setTap:i,setPress:k,setSwipeLeft:l,setSwipeRight:n,setSwipeTop:p,setSwipeBottom:D,setDown:G,setUp:H})}var K={},M=c({stopPropagation:!1,tapMaxTime:300,swipeMaxTime:500,pointerValidLength:5},e),N={pan:F,tap:F,press:F,swipeLeft:F,swipeRight:F,swipeTop:F,swipeBottom:F,down:F,up:F},O=null;return function(){f(d).each(function(a,c){J(b(c))})}(),{setPan:h,setTap:i,setPress:k,setSwipeLeft:l,setSwipeRight:n,setSwipeTop:p,setSwipeBottom:D,setUp:H,setDown:G}},N=function(){var a={event:M,controlCreate:function(){var c=b("["+k+"]");c.each(function(){var c=b(this),f=d(c);f.forEach(function(b,d){var f=e(b),g=c.attr(m+b+"-ready");g||a[f].create(c)})})}};return a}(),O=function(a){function b(a,b){a=a||{},a.transfer=a.transfer||g.origin||null,a.accept=a.accept||g.current||null,a.attrReg=a.attrReg||null,a.transfer&&a.accept&&b(a.transfer,a.accept,a.attrReg)}function c(a,b){a=f(a),b=b||F,b(a)}var d=this,e={},g={"public":{ud2:!0,collection:d["public"],type:a,appendTo:function(a){c(a,function(a){a.last().append(g.current)})},prependTo:function(a){c(a,function(a){a.last().prepend(g.current)})},insertBefore:function(a){c(a,function(a){a.last().before(g.current)})},insertAfter:function(a){c(a,function(a){a.last().after(g.current)})}},origin:null,current:E.clone(),userOptions:e,getOriginAttr:function(a,b){a=function(){return H[a]||(H[a]=a.match(G).join(l).toLowerCase()),H[a]}();var c=b?a:d.className+l+a;return g.origin?g.origin.attr(c):null},getOptions:function(a,b){var c={};return a.forEach(function(a){c[a]=g.userOptions[a]||g.getOriginAttr(a,1)||g.getOriginAttr(a)}),b(c),c},transferStyles:function(a){b(a,function(a,b){b.attr("style",a.attr("style")).addClass(a.attr("class")),a.removeAttr("style").removeClass()})},transferAttrs:function(a){b(a,function(a,b,c){for(var d,e=a.get(0),f=b.get(0),g=e?e.attributes.length:0,h=new RegExp("^("+c+")"),i=0,j=0;g>i;i++)d=e.attributes[j],h.test(d.name)?(f.setAttribute(d.name,d.value),e.removeAttribute(d.name)):j++})}};return g},P=function(a){var b={"public":[],init:F,name:a,ctrlName:e(a),className:m+a};return b},Q=function(){var a=0;return function(){return m+a++}}(),R=function(a,b){var d=P(a),e=function(){return g.apply(e,arguments)},g=function(){var b,h,i,j=O.call(d,a),l=arguments,m=l.length;switch(m){case 0:return g.call(e,void 0,void 0,{});case 1:return K.isString(l[0])?g.call(e,l[0],void 0,void 0):K.isJQuery(l[0])?g.call(e,void 0,l[0],void 0):K.isObject(l[0])?g.call(e,void 0,void 0,l[0]):g.call(e);case 2:if(K.isString(l[0])&&(K.isJQuery(l[1])||K.isString(l[1])))return g.call(e,l[0],l[1],void 0);if(K.isString(l[0])&&K.isObject(l[1]))return g.call(e,l[0],void 0,l[1]);if(K.isJQuery(l[0])&&K.isObject(l[1]))return g.call(e,void 0,l[0],l[1]);break;case 3:b=K.isString(l[0])&&l[0].length>0?l[0]:Q(),h=f(l[1]).first(),i=K.isObject(l[2])?l[2]:{}}return c(j,{origin:h,userOptions:i}),c(j["public"],{id:b}),d["public"].push(j["public"]),d["public"][b]=j["public"],j.current.attr(k,a).attr(k+"-id",b).attr(d.className+"-ready",!0).addClass(d.className),d.init(j)||j["public"]};return b(d),N[a]=e,d.name!==d.ctrlName&&(N[d.ctrlName]=e),e.create=g,e.collection=d["public"],e};return R("number",function(a){a.init=function(b){function c(a){return a=parseFloat(a),(isNaN(a)||e>a)&&(a=e),a>f&&(a=f),a=Math.round((a-e)/d)*(D*d)/D+e}var d,e,f,g,h=a.className,i=(b.getOptions(["step","min","max","value","abc","abcDef"],function(a){d=parseFloat(a.step),(isNaN(d)||0===d)&&(d=1),e=parseFloat(a.min),isNaN(e)&&(e=0),f=parseFloat(a.max),isNaN(f)&&(f=100),g=a.value,e>f&&(f=e),g=c(g)}),'<a class="'+h+'-ico">&#xe106;</a><div class="'+h+'-move"><input type="text" value="0" class="ud2-ctrl-txtbox" /></div><a class="'+h+'-ico">&#xe107;</a>'),j=b.current,k=j.html(i),l=k.find("input"),m=k.children("a:first");k.children("a:last"),m.next();!function(){j=k,b.origin.after(k),b.origin.remove(),b.transferStyles(),b.transferAttrs({accept:l,attrReg:"name|tabindex"})}()}}),function(){j.ready(function(){g=b("body"),L.safari&&h.body.addEventListener("touchstart",b.noop),J.pageReady.fire(),I=!0}),i.bind("resize orientationchange",function(){J.pageResize.fire()}),J.pageReady.add(N.controlCreate)}(),c(N,{type:K})}(window,jQuery);