/*! ud2 - v0.0.0
 * (c) 2015 Peak(peak@udtwo.com) */
if("undefined"==typeof $)throw new Error("ud2库需要JQuery支持");var ud2=function(a,b){"use strict";function c(a){return function(b){return{}.toString.call(b)==="[object "+a+"]"}}function d(a){return c("Object")(a)}function e(a){return c("String")(a)}function f(a){return/^([1-9]\d+|[0-9])$/.test(a)}function g(a){return a instanceof b}function h(a){if(a=i(a),0===a.length)return L.clone();if(1===a.length)return a.attr(u+this.name+"-state")?void 0:a;for(var b=a.length,c=0;b>c;c++)this.create(a.eq(c))}function i(c){return c||(c=b()),e(c)&&(c=b(c)),c===a&&(c=b(a)),g(c)||(c=b()),c}function j(a,c){a=i(a),a.each(function(){c(b(this))})}function k(a){var b=(a.attr(s)||"").split(" "),c=[];return b.forEach(function(a){0!==a.length&&c.push(a)}),c}function l(a,b){var c=k(a);return c.indexOf(b)>-1?!0:!1}function m(a,b){if(Q[n(b)]&&!l(a,b)){var c=k(a);c.push(b),a.attr(s,c.join(" "))}}function n(a){var b=a.split("-"),c=1,d=b.length;if(d>1)for(;d>c;c++)b[c].length>0&&(b[c]=b[c].substr(0,1).toUpperCase()+b[c].substr(1));return b.join("")}function o(a,b){if(d(b))for(var c in b)void 0!==a[c]&&(a[c]=b[c])}var p=a.document,q=b(a),r=b(p),s="ud2",t="-",u=[s,t].join(""),v=(" -webkit- -moz- -o- -ms- ".split(" "),function(){var b={},c=p.createElement("div");return b.safari=/constructor/i.test(a.HTMLElement),b.touch="ontouchstart"in a||a.DocumentTouch&&p instanceof DocumentTouch,b.pointer=a.navigator.pointerEnabled,b.msPointer=a.navigator.msPointerEnabled,b.touchAction=void 0!==c.style.touchAction||void 0!==c.style.msTouchAction||!1,b.perspective=void 0!==c.style.perspective||void 0!==c.style.msPerspective||void 0!==c.style.mozPerspective||void 0!==c.style.webkitPerspective||!1,b.transition=void 0!==c.style.transition||void 0!==c.style.msTransition||void 0!==c.style.mozTransition||void 0!==c.style.webkitTransition||void 0!==c.style.oTransition||!1,b.animation=void 0!==c.style.animation||void 0!==c.style.mozAnimation||void 0!==c.style.webkitAnimation||void 0!==c.style.oAnimation||!1,b}()),w=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)},x={date:/^(?:[12]\d{3}([\.\-\/])(?:(?:0?[13578]|1[02])\1(?:0?[1-9]|[12]\d|3[01])|(?:0?[469]|11)\1(?:0?[1-9]|[12]\d|30)|0?2\1(?:0?[1-9]|1\d|2[0-8]))$|[12]\d(?:[02468][048]|[13579][26])([\.\-\/])(?:(?:0?[13578]|1[02])\2(?:0?[1-9]|[12]\d|3[01])|(?:0?[469]|11)\2(?:0?[1-9]|[12]\d|30)|0?2\2(?:0?[1-9]|1\d|2[0-9])))$/},y=function(){var a=0;return{create:function(){return"nonamed-"+a++}}}(),z=Date.now||function(){return(new Date).getTime()},A=v.pointer?"pointerdown":"MSPointerDown",B=v.pointer?"pointermove":"MSPointerMove",C=v.pointer?"pointerup":"MSPointerUp",D="touchstart",E="touchmove",F="touchend",G="touchcancel",H="mousedown",I="mousemove",J="mouseup",K="mouseout",L=b("<div />"),M=(b("<a />"),b("<span />"),function(){return!1}),N=b.Callbacks(),O=(b.Callbacks(),function(a,c){function d(a,b){b?a.css({"-ms-touch-action":"none","touch-action":"none"}):a.css({"-ms-touch-action":"auto","touch-action":"auto"}),v.touchAction||(b?a.bind("selectstart",M):a.unbind("selectstart",M))}function e(a){return y.pan=a,w}function f(a){return y.tap=a,w}function g(a){return y.press=a,w}function h(a){return y.swipeLeft=a,w}function i(a){return y.swipeRight=a,w}function k(a){return y.swipeTop=a,w}function l(a){return y.swipeBottom=a,w}function m(a){return y.down=a,w}function n(a){return y.up=a,w}function p(){N.forEach(function(){arguments[0].bind()})}function q(){N.forEach(function(){arguments[0].unbind()})}function s(a,b){this.del=!1,this.id=a,this.downScreenX=b?b.screenX:0,this.downScreenY=b?b.screenY:0,this.downPageX=b?b.pageX:0,this.downPageY=b?b.pageY:0,this.downClientX=b?b.clientX:0,this.downClientY=b?b.clientY:0,this.moveScreenX=this.downScreenX,this.moveScreenY=this.downScreenY,this.movePageX=this.downPageX,this.movePageY=this.downPageY,this.moveClientX=this.downClientX,this.moveClientY=this.downClientY}function t(a){function b(a){0===c()&&(Q.id=a,Q.time=z())}function c(){var a=0;for(var b in P)P[b].del||a++;return a}function e(){for(var a in P)P[a].del&&delete P[a]}function f(a){x.stopPropagation&&a.stopPropagation();var d=a.originalEvent,e=d.pointerId;b(e),0===c()&&(r.bind(O[1],g),r.bind(O[2],h)),(!P[e]||P[e].del)&&(P[e]=new s(e,d),o(a,e))}function g(a){x.stopPropagation&&a.stopPropagation(),a.preventDefault();var b=a.originalEvent,c=b.pointerId;P[c]&&(P[c].setMove(b),p(a,c))}function h(a){x.stopPropagation&&a.stopPropagation();var b=a.originalEvent,d=b.pointerId;P[d]&&(q(a,d),P[d].del=!0,0===c()&&(r.unbind(O[1],g),r.unbind(O[2],h)))}function i(a){x.stopPropagation&&a.stopPropagation();var d=a.originalEvent,e=d.changedTouches;0===c()&&(N.bind(O[4],j),N.bind(O[5],k),N.bind(O[6],k)),b(e[0].identifier);for(var f=0,g=e.length;g>f;f++)(!P[e[f].identifier]||P[e[f].identifier].del)&&(P[e[f].identifier]=new s(e[f].identifier,e[f])),o(a,e[f].identifier)}function j(a){x.stopPropagation&&a.stopPropagation(),a.preventDefault();for(var b=a.originalEvent,c=b.changedTouches,d=0,e=c.length;e>d;d++)P[c[d].identifier]&&P[c[d].identifier].setMove(c[d]),p(a,c[d].identifier)}function k(a){x.stopPropagation&&a.stopPropagation();for(var b=a.originalEvent,d=b.changedTouches,e=0,f=d.length;f>e;e++)q(a,d[e].identifier),P[d[e].identifier].del=!0;0===c()&&(N.unbind(O[4],j),N.unbind(O[5],k),N.unbind(O[6],k))}function l(a){x.stopPropagation&&a.stopPropagation();var c=a.originalEvent;b(0),P[0]=new s(0,c),o(a,0),r.bind(O[8],m),r.bind(O[9],n)}function m(a){x.stopPropagation&&a.stopPropagation(),a.stopPropagation();var b=a.originalEvent;P[0]&&(P[0].setMove(b),p(a,0))}function n(a){x.stopPropagation&&a.stopPropagation(),P[0]&&(q(a,0),void 0!==P[0]&&P[0].del===!1&&(P[0].del=!0),r.unbind(O[8],m),r.unbind(O[9],n))}function o(b,c){R=!1;for(var d=a.parents(),e=d.length,f=0;e>f;f++)if("1"===d.eq(f).attr(u+"scroll-runing")){R=!0;break}y.down.call(a,c)}function p(b,c){var d=P[c].getMoveLength();b.preventDefault(),y.pan.call(a,d,c)}function q(b,c){var d=null,f=P[c].getMoveLength(),g={x:Math.abs(f.x),y:Math.abs(f.y)};L&&z()-L.time<500&&"touchend"===L.type&&"mouseup"===b.type||(L={time:z(),type:b.type},Q.id===c&&(d=new Date-Q.time,Q.id=null,Q.time=null),d&&(g.x<x.pointerValidLength&&g.y<x.pointerValidLength&&(R||(d<x.tapMaxTime?y.tap.call(a):y.press.call(a))),g.x>=x.pointerValidLength&&g.x>=g.y&&d<x.swipeMaxTime&&(f.x<0?(b.preventDefault(),y.swipeLeft.call(a)):(b.preventDefault(),y.swipeRight.call(a))),g.y>=x.pointerValidLength&&g.y>=g.x&&d<x.swipeMaxTime&&(f.y<0?(b.preventDefault(),y.swipeTop.call(a)):(b.preventDefault(),y.swipeBottom.call(a)))),y.up.call(a,c),e())}function t(a){v.pointer||v.msPointer?a?N.bind(O[0],f):N.unbind(O[0],f):a?(N.bind(O[3],i),N.bind(O[7],l)):(N.unbind(O[3],i),N.unbind(O[7],l)),a?d(N,!0):d(N,!1)}function w(){S||(S=!0,t(!0))}function M(){S&&(S=!1,t(!1))}var N=a,O=[A,B,C,D,E,F,G,H,I,J,K],P={},Q={id:null,time:null},R=!1,S=!1;return function(){w();var b=a.find("a, img");b.bind("dragstart",function(a){a.preventDefault()})}(),{bind:w,unbind:M}}var w={},x={stopPropagation:!1,tapMaxTime:300,swipeMaxTime:500,pointerValidLength:5},y={pan:b.noop,tap:b.noop,press:b.noop,swipeLeft:b.noop,swipeRight:b.noop,swipeTop:b.noop,swipeBottom:b.noop,down:b.noop,up:b.noop},L=null,N=[];return s.prototype.setMove=function(a){a&&a.screenX&&(this.moveScreenX=a.screenX),a&&a.screenY&&(this.moveScreenY=a.screenY),a&&a.pageX&&(this.movePageX=a.pageX),a&&a.pageY&&(this.movePageY=a.pageY),a&&a.clientX&&(this.moveClientX=a.clientX),a&&a.clientY&&(this.moveClientY=a.clientY)},s.prototype.getMoveLength=function(){return{x:this.movePageX-this.downPageX,y:this.movePageY-this.downPageY}},function(){o(x,c),j(a,function(a){N.push(t(a))})}(),w={setPan:e,setTap:f,setPress:g,setSwipeLeft:h,setSwipeRight:i,setSwipeTop:k,setSwipeBottom:l,setDown:m,setUp:n,on:p,off:q}}),P=function(a,c){function d(a){return m.scroll=a,k}function e(a){return m.down=a,k}function f(a){return m.up=a,k}function g(){p.forEach(function(){arguments[0].bind()})}function h(){p.forEach(function(){arguments[0].unbind()})}function i(a){function b(b){b.stopPropagation(),b.preventDefault();var c=b.originalEvent,d=c.deltaY/100||c.wheelDelta/-120||(Math.abs(c.detail)>2?c.detail/3:c.detail)||0;m.scroll.call(a,d),d>0?m.down.call(a):m.up.call(a)}function c(){f||(f=!0,e.bind(n,b))}function d(){f&&(f=!1,e.unbind(n,b))}var e=a,f=!1;return function(){c()}(),{bind:c,unbind:d}}var k={},l={},m={scroll:b.noop,down:b.noop,up:b.noop},n="DOMMouseScroll mousewheel",p=[];return function(){o(l,c),j(a,function(a){p.push(i(a))})}(),k={setScroll:d,setDown:e,setUp:f,on:g,off:h}},Q=function(){function a(){function a(){var a=b(this),d=k(a);d.forEach(function(b,d){var e=n(b),f=a.attr(u+b+"-state");f||c[e].create(a)})}var d=b("["+s+"]");d.each(a);for(var e in c)c[e]&&c[e].isControlsGroup&&c[e].findDocument()}var c={};return c.createAll=a,c}(),R=function(a){var b,c;return b=i(a),0===b.length&&(b=L.clone()),b.length>1&&(b=b.eq(0)),c=b.attr(u+"name"),c||(c=y.create(),b.attr(u+"name",c)),{$origin:b,"public":{name:c}}},S=function(a){var c=[];return c.name=e(a)?a:"empty",c.controlName=n(a),c.isControlsGroup=!0,c.findDocument=b.noop,c.init=function(a,b){return a["public"]},c.create=function(a,b){if(a=h.call(this,a)){var c=R(a);return this.push(c["public"]),this[c["public"].name]=c["public"],m(c.$origin,this.name),c.$origin.attr(u+this.name+"-state",!0),this.init(c,b),c["public"]}},Q[c.name]=c,c},T=function(c,d){function e(){if(K.hasVertical){var a=0,b=0,c=0;if(a=R.height(),$.h=Q.height(),$.ih=Q.innerHeight(),$.sh=a-$.h,$.now.y<-$.sh&&($.now.y=-$.sh),c=$.ih-2*K.barOffset,0!==$.h){var d=$.sh/(5*$.ih);d=1-(d>1?1:d),b=c*d,b=b<K.barMinLength?K.barMinLength:b,b=b>c?c:b,_.h=b,_.mh=c,_.sh=c-b,T.height(b)}}if(K.hasHorizontal){var e=0,f=0,g=0;if(e=R.width(),$.w=Q.width(),$.iw=Q.innerWidth(),$.sw=e-$.w,$.now.x<-$.sw&&($.now.x=-$.sw),g=$.iw-2*K.barOffset,0!==$.w){var d=$.sw/(5*$.iw);d=1-(d>1?1:d),f=g*d,f=f<K.barMinLength?K.barMinLength:f,f=f>g?g:f,_.w=f,_.mw=g,_.sw=g-f,S.width(f)}}}function g(){var a,b;if(v.transition){var c=R.css("transform");c=c.split(")")[0].split(", "),a=Math.round(+(c[12]||c[4])),b=Math.round(+(c[13]||c[5]))}else a=$.now.x,b=$.now.y;return{x:a,y:b}}function h(a){X!==a&&(X=a,Q.attr(U,a?1:0),a?r():s())}function j(a,b){var c=b?"sh":"sw";return 0===$[c]||0===_[c]?0:a/$[c]*_[c]}function k(a,b){var c=b?"sh":"sw";return 0===$[c]||0===_[c]?0:a/_[c]*$[c]}function l(a,b,c,d){c=c||0,d=d||V.circular,a>0&&(a=0),b>0&&(b=0),b<-$.sh&&(b=-$.sh),a<-$.sw&&(a=-$.sw),v.transition?(m(d.css),n(c),R.css("transform","translate("+a+"px, "+b+"px)"+(v.perspective?" translateZ(0)":"")),K.hasVertical&&T.css("transform","translate(0, "+j(-b,1)+"px)"+(v.perspective?" translateZ(0)":"")),K.hasHorizontal&&S.css("transform","translate("+j(-a,0)+"px, 0)"+(v.perspective?" translateZ(0)":"")),$.now={x:a,y:b}):0===c?(R.css({left:a,top:b}),K.hasVertical&&T.css("top",j(-b,1)+"px"),K.hasHorizontal&&S.css("left",j(-a,0)+"px"),$.now={x:a,y:b}):p(a,b,c,d.fn)}function m(a){R.css("transition-timing-function",a),T.css("transition-timing-function",a+", ease-out, ease-out, ease-out"),S.css("transition-timing-function",a+", ease-out, ease-out, ease-out")}function n(b){var c=parseInt(b);R.css("transition-duration",c+"ms"),T.css("transition-duration",c+"ms, 300ms, 300ms, 300ms"),S.css("transition-duration",c+"ms, 300ms, 300ms, 300ms"),0!==c&&(Y&&a.clearTimeout(Y),Y=a.setTimeout(function(){l($.now.x,$.now.y,0),h(!1)},c))}function p(a,b,c,d){function e(){var j,k,l,m=z();i>m?(m=(m-h)/c,l=d(m),j=(a-f)*l+f,k=(b-g)*l+g,$.now={x:j,y:k},R.css({left:j,top:k}),K.hasVertical&&T.css("top",-k/$.sh*_.sh),K.hasHorizontal&&S.css("left",-j/$.sh*_.sh),X&&w(e)):X=!1}var f=$.now.x,g=$.now.y,h=z(),i=h+c;X=!0,e()}function r(){0===K.barState&&(_.timer&&a.clearTimeout(_.timer),v.transition?(S.stop().fadeIn(200),T.stop().fadeIn(200)):(S.show(),T.show()))}function s(){0===K.barState&&(N||M||X||(_.timer&&a.clearTimeout(_.timer),_.timer=a.setTimeout(function(){v.transition?(S.stop().fadeOut(500),T.stop().fadeOut(500)):(S.hide(),T.hide())},1e3)))}function t(a,b,c,d,e,f){var g,h,i=a-b,j=Math.abs(i)/c;return d=-d,e=e||0,f=f||5e-4,g=a+j*j/(2*f)*(0>i?-1:1),h=j/f,d>g?(g=e?d-e/2.5*(j/8):d,i=Math.abs(g-a),h=i/j):g>0&&(g=e?e/2.5*(j/8):0,i=Math.abs(a)+g,h=i/j),{destination:Math.round(g),duration:h}}function x(){return X}function y(){return e(),l($.now.x,$.now.y),J}function A(a,b,c,d){return l(-a,-b,c,d),J}function B(){e(),h(!0);var a=g();l(a.x,a.y),W.moved=!1,W.start=z(),W.startMove={x:$.now.x,y:$.now.y},W.lastMove={x:0,y:0}}function C(a){var b=z(),c=a.x,d=a.y,e=Math.abs(c),f=Math.abs(d),g=c-W.lastMove.x,i=d-W.lastMove.y,j=0,k=0;h(!0),W.lastMove={x:c,y:d},b-W.end>300&&Z>e&&Z>f||(W.moved||(W.moved=!0),K.hasVertical&&(k=i+$.now.y),K.hasHorizontal&&(j=g+$.now.x),(0!==g||0!==i)&&l(j,k),b-W.start>=300&&(W.start=b,W.startMove.x=j,W.startMove.y=k))}function D(){var a=$.now.x,b=$.now.y,c=a,d=b,e=null,f=null,g=z()-W.start,i=0;if(W.end=z(),!W.moved||!K.slowMoving)return void h(!1);if(300>g){var j=0,k=0;K.hasVertical&&(f=t(b,W.startMove.y,g,$.sh,K.bounce?$.h:0),d=f.destination,k=f.duration),K.hasHorizontal&&(e=t(a,W.startMove.x,g,$.sw,K.bounce?$.w:0),c=e.destination,j=e.duration),i=Math.max(j,k)}c!==a||d!==b?l(c,d,i):h(!1)}function E(a){var b=$.now.x,c=$.now.y,d=300,f=K.mousewheelLength;e(),"normal"===f&&(f=Math.round($.h)),a>0?c-=f:c+=f,h(c>0||c<-$.sh?!1:!0),l(b,c,d)}function F(){this.move=0,M=!0,b(this).css("background",K.barHoverColor)}function G(){M=!1,s(),b(this).css("background",K.barColor)}function H(a,b){var c=b?$.now.x:k(-(a.x-this.move),0)+$.now.x,d=b?k(-(a.y-this.move),1)+$.now.y:$.now.y;b?this.move=a.y:this.move=a.x,l(c,d)}function I(){K.recountByResize&&q.bind("resize orientationchange",y),Q.bind("mouseenter",function(){0===K.barState&&(N=!0,r())}).bind("mouseleave",function(){0===K.barState&&(N=!1,s())}),K.isTouchMode&&O(Q,{stopPropagation:!0}).setDown(B).setUp(D).setPan(C),K.isMouseWheelMode&&P(Q).setScroll(E),K.isScrollMode&&(O(T,{stopPropagation:!0}).setPan(function(a){H.call(this,a,1)}).setDown(F).setUp(G),O(S,{stopPropagation:!0}).setPan(function(a){H.call(this,a,0)}).setDown(F).setUp(G))}var J={},K={recountByResize:!1,barState:0,barSize:6,barMinLength:30,barOffset:1,barColor:"rgba(0,0,0,.4)",barHoverColor:"rgba(0,0,0,.6)",barBorderRadiusState:!0,isMouseWheelMode:!0,isTouchMode:!0,isScrollMode:!1,mousewheelLength:"normal",hasHorizontal:!1,hasVertical:!0,slowMoving:!0},M=!1,N=!1,Q=i(c).eq(0),R=L.clone().addClass(u+"scroll-wrapper"),S=L.clone().addClass(u+"scroll-bar"),T=L.clone().addClass(u+"scroll-bar"),U=u+"scroll-runing",V={quadratic:{css:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(a){return a*(2-a)}},circular:{css:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(a){return Math.sqrt(1- --a*a)}}},W={id:null,start:0,end:0,moved:!1,startMove:{x:0,y:0},lastMove:{x:0,y:0}},X=!1,Y=null,Z=5,$={h:0,ih:0,sh:0,w:0,iw:0,sw:0,now:{x:0,y:0},isMoved:!1},_={h:0,mh:0,sh:0,w:0,mw:0,sw:0,timer:null};return function(){o(K,d),"normal"===K.mousewheelLength||f(K.mousewheelLength)||(K.mousewheelLength="normal");var a=Q.contents();0===a.length?Q.append(R):(a.wrapAll(R),R=Q.children("."+u+"scroll-wrapper")),R.css("padding",Q.css("padding-top")+" "+Q.css("padding-right")+" "+Q.css("padding-bottom")+" "+Q.css("padding-left")),Q.addClass("ud2-scroll"),K.hasVertical&&Q.prepend(T),K.hasHorizontal&&Q.prepend(S),T.css({top:K.barOffset,right:K.barOffset,width:K.barSize,background:K.barColor}),S.css({left:K.barOffset,bottom:K.barOffset,height:K.barSize,background:K.barColor}),K.barBorderRadiusState&&(T.css("border-radius",K.barSize/2),S.css("border-radius",K.barSize/2)),1===K.barState&&(T.show(),S.show()),e(),I()}(),J={$content:R,move:A,getState:x,recountPosition:y}};return function(){r.ready(function(){v.safari&&p.body.addEventListener("touchstart",b.noop),N.fire()}),N.add(Q.createAll)}(),Q.reg=x,Q.support=v,Q.animateFrame=w,Q.event=O,Q.eventMouseWheel=P,Q.ctrl=R,Q.ctrlGroup=S,Q.scroll=T,Q}(window,jQuery);
/* lasted： 2015-10-18 10:23:34 */