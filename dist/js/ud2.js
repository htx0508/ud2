/*! ud2 - v0.0.0
 * (c) 2015 Peak(peak@udtwo.com) */
if("undefined"==typeof $)throw new Error("ud2库需要JQuery支持");var ud2=function(a,b){"use strict";function c(a){return function(b){return{}.toString.call(b)==="[object "+a+"]"}}function d(a){return c("Object")(a)}function e(a){return c("String")(a)}function f(a){return a instanceof b}function g(a){if(a=h(a),0===a.length)return K.clone();if(1===a.length)return a.attr(t+this.name+"-state")?void 0:a;for(var b=a.length,c=0;b>c;c++)this.create(a.eq(c))}function h(c){return c||(c=b()),e(c)&&(c=b(c)),c===a&&(c=b(a)),f(c)||(c=b()),c}function i(a,c){a=h(a),a.each(function(){c(b(this))})}function j(a){var b=(a.attr(r)||"").split(" "),c=[];return b.forEach(function(a){0!==a.length&&c.push(a)}),c}function k(a,b){var c=j(a);return c.indexOf(b)>-1?!0:!1}function l(a,b){if(P[m(b)]&&!k(a,b)){var c=j(a);c.push(b),a.attr(r,c.join(" "))}}function m(a){var b=a.split("-"),c=1,d=b.length;if(d>1)for(;d>c;c++)b[c].length>0&&(b[c]=b[c].substr(0,1).toUpperCase()+b[c].substr(1));return b.join("")}function n(a,b){if(d(b))for(var c in b)void 0!==a[c]&&(a[c]=b[c])}var o=a.document,p=b(a),q=b(o),r="ud2",s="-",t=[r,s].join(""),u=(" -webkit- -moz- -o- -ms- ".split(" "),function(){var b={},c=o.createElement("div");return b.safari=/constructor/i.test(a.HTMLElement),b.touch="ontouchstart"in a||a.DocumentTouch&&o instanceof DocumentTouch,b.pointer=a.navigator.pointerEnabled,b.msPointer=a.navigator.msPointerEnabled,b.touchAction=void 0!==c.style.touchAction||void 0!==c.style.msTouchAction||!1,b.perspective=void 0!==c.style.perspective||void 0!==c.style.msPerspective||void 0!==c.style.mozPerspective||void 0!==c.style.webkitPerspective||!1,b.transition=void 0!==c.style.transition||void 0!==c.style.msTransition||void 0!==c.style.mozTransition||void 0!==c.style.webkitTransition||void 0!==c.style.oTransition||!1,b.animation=void 0!==c.style.animation||void 0!==c.style.mozAnimation||void 0!==c.style.webkitAnimation||void 0!==c.style.oAnimation||!1,b}()),v=function(){},w={date:/^(?:[12]\d{3}([\.\-\/])(?:(?:0?[13578]|1[02])\1(?:0?[1-9]|[12]\d|3[01])|(?:0?[469]|11)\1(?:0?[1-9]|[12]\d|30)|0?2\1(?:0?[1-9]|1\d|2[0-8]))$|[12]\d(?:[02468][048]|[13579][26])([\.\-\/])(?:(?:0?[13578]|1[02])\2(?:0?[1-9]|[12]\d|3[01])|(?:0?[469]|11)\2(?:0?[1-9]|[12]\d|30)|0?2\2(?:0?[1-9]|1\d|2[0-9])))$/},x=function(){var a=0;return{create:function(){return"nonamed-"+a++}}}(),y=Date.now||function(){return(new Date).getTime()},z=u.pointer?"pointerdown":"MSPointerDown",A=u.pointer?"pointermove":"MSPointerMove",B=u.pointer?"pointerup":"MSPointerUp",C="touchstart",D="touchmove",E="touchend",F="touchcancel",G="mousedown",H="mousemove",I="mouseup",J="mouseout",K=b("<div />"),L=(b("<a />"),b("<span />"),function(){return!1}),M=b.Callbacks(),N=(b.Callbacks(),function(a,c){function d(a,b){b?a.css({"-ms-touch-action":"none","touch-action":"none"}):a.css({"-ms-touch-action":"auto","touch-action":"auto"}),u.touchAction||(b?a.bind("selectstart",L):a.unbind("selectstart",L))}function e(a){return K.pan=a,w}function f(a){return K.tap=a,w}function g(a){return K.press=a,w}function h(a){return K.swipeLeft=a,w}function j(a){return K.swipeRight=a,w}function k(a){return K.swipeTop=a,w}function l(a){return K.swipeBottom=a,w}function m(a){return K.down=a,w}function o(a){return K.up=a,w}function p(){N.forEach(function(){arguments[0].bind()})}function r(){N.forEach(function(){arguments[0].unbind()})}function s(a,b){this.del=!1,this.id=a,this.downScreenX=b?b.screenX:0,this.downScreenY=b?b.screenY:0,this.downPageX=b?b.pageX:0,this.downPageY=b?b.pageY:0,this.downClientX=b?b.clientX:0,this.downClientY=b?b.clientY:0,this.moveScreenX=this.downScreenX,this.moveScreenY=this.downScreenY,this.movePageX=this.downPageX,this.movePageY=this.downPageY,this.moveClientX=this.downClientX,this.moveClientY=this.downClientY}function v(a){function b(a){0===c()&&(Q.id=a,Q.time=y())}function c(){var a=0;for(var b in P)P[b].del||a++;return a}function e(){for(var a in P)P[a].del&&delete P[a]}function f(a){x.stopPropagation&&a.stopPropagation();var d=a.originalEvent,e=d.pointerId;b(e),0===c()&&(q.bind(O[1],g),q.bind(O[2],h)),(!P[e]||P[e].del)&&(P[e]=new s(e,d),o(a,e))}function g(a){x.stopPropagation&&a.stopPropagation(),a.preventDefault();var b=a.originalEvent,c=b.pointerId;P[c]&&(P[c].setMove(b),p(a,c))}function h(a){x.stopPropagation&&a.stopPropagation();var b=a.originalEvent,d=b.pointerId;P[d]&&(r(a,d),P[d].del=!0,0===c()&&(q.unbind(O[1],g),q.unbind(O[2],h)))}function i(a){x.stopPropagation&&a.stopPropagation();var d=a.originalEvent,e=d.changedTouches;0===c()&&(N.bind(O[4],j),N.bind(O[5],k),N.bind(O[6],k)),b(e[0].identifier);for(var f=0,g=e.length;g>f;f++)(!P[e[f].identifier]||P[e[f].identifier].del)&&(P[e[f].identifier]=new s(e[f].identifier,e[f])),o(a,e[f].identifier)}function j(a){x.stopPropagation&&a.stopPropagation(),a.preventDefault();for(var b=a.originalEvent,c=b.changedTouches,d=0,e=c.length;e>d;d++)P[c[d].identifier]&&P[c[d].identifier].setMove(c[d]),p(a,c[d].identifier)}function k(a){x.stopPropagation&&a.stopPropagation();for(var b=a.originalEvent,d=b.changedTouches,e=0,f=d.length;f>e;e++)r(a,d[e].identifier),P[d[e].identifier].del=!0;0===c()&&(N.unbind(O[4],j),N.unbind(O[5],k),N.unbind(O[6],k))}function l(a){x.stopPropagation&&a.stopPropagation();var c=a.originalEvent;b(0),P[0]=new s(0,c),o(a,0),q.bind(O[8],m),q.bind(O[9],n)}function m(a){x.stopPropagation&&a.stopPropagation(),a.stopPropagation();var b=a.originalEvent;P[0]&&(P[0].setMove(b),p(a,0))}function n(a){x.stopPropagation&&a.stopPropagation(),P[0]&&(r(a,0),void 0!==P[0]&&P[0].del===!1&&(P[0].del=!0),q.unbind(O[8],m),q.unbind(O[9],n))}function o(b,c){R=!1;for(var d=a.parents(),e=d.length,f=0;e>f;f++)if("1"===d.eq(f).attr(t+"scroll-running")){R=!0;break}K.down.call(a,c)}function p(b,c){var d=P[c].getMoveLength();b.preventDefault(),K.pan.call(a,d,c)}function r(b,c){var d=null,f=P[c].getMoveLength(),g={x:Math.abs(f.x),y:Math.abs(f.y)};M&&y()-M.time<500&&"touchend"===M.type&&"mouseup"===b.type||(M={time:y(),type:b.type},Q.id===c&&(d=new Date-Q.time,Q.id=null,Q.time=null),d&&(g.x<x.pointerValidLength&&g.y<x.pointerValidLength&&(R||(d<x.tapMaxTime?K.tap.call(a):K.press.call(a))),g.x>=x.pointerValidLength&&g.x>=g.y&&d<x.swipeMaxTime&&(f.x<0?(b.preventDefault(),K.swipeLeft.call(a)):(b.preventDefault(),K.swipeRight.call(a))),g.y>=x.pointerValidLength&&g.y>=g.x&&d<x.swipeMaxTime&&(f.y<0?(b.preventDefault(),K.swipeTop.call(a)):(b.preventDefault(),K.swipeBottom.call(a)))),K.up.call(a,c),e())}function v(a){u.pointer||u.msPointer?a?N.bind(O[0],f):N.unbind(O[0],f):a?(N.bind(O[3],i),N.bind(O[7],l)):(N.unbind(O[3],i),N.unbind(O[7],l)),a?d(N,!0):d(N,!1)}function w(){S||(S=!0,v(!0))}function L(){S&&(S=!1,v(!1))}var N=a,O=[z,A,B,C,D,E,F,G,H,I,J],P={},Q={id:null,time:null},R=!1,S=!1;return function(){w();var b=a.find("a, img");b.bind("dragstart",function(a){a.preventDefault()})}(),{bind:w,unbind:L}}var w={},x={stopPropagation:!1,tapMaxTime:300,swipeMaxTime:500,pointerValidLength:5},K={pan:b.noop,tap:b.noop,press:b.noop,swipeLeft:b.noop,swipeRight:b.noop,swipeTop:b.noop,swipeBottom:b.noop,down:b.noop,up:b.noop},M=null,N=[];return s.prototype.setMove=function(a){a&&a.screenX&&(this.moveScreenX=a.screenX),a&&a.screenY&&(this.moveScreenY=a.screenY),a&&a.pageX&&(this.movePageX=a.pageX),a&&a.pageY&&(this.movePageY=a.pageY),a&&a.clientX&&(this.moveClientX=a.clientX),a&&a.clientY&&(this.moveClientY=a.clientY)},s.prototype.getMoveLength=function(){return{x:this.movePageX-this.downPageX,y:this.movePageY-this.downPageY}},function(){n(x,c),i(a,function(a){N.push(v(a))})}(),w={setPan:e,setTap:f,setPress:g,setSwipeLeft:h,setSwipeRight:j,setSwipeTop:k,setSwipeBottom:l,setDown:m,setUp:o,on:p,off:r}}),O=function(a,c){function d(a){return m.scroll=a,k}function e(a){return m.down=a,k}function f(a){return m.up=a,k}function g(){p.forEach(function(){arguments[0].bind()})}function h(){p.forEach(function(){arguments[0].unbind()})}function j(a){function b(b){b.stopPropagation(),b.preventDefault();var c=b.originalEvent,d=c.deltaY/100||c.wheelDelta/-120||(Math.abs(c.detail)>2?c.detail/3:c.detail)||0;m.scroll.call(a,d),d>0?m.down.call(a):m.up.call(a)}function c(){f||(f=!0,e.bind(o,b))}function d(){f&&(f=!1,e.unbind(o,b))}var e=a,f=!1;return function(){c()}(),{bind:c,unbind:d}}var k={},l={},m={scroll:b.noop,down:b.noop,up:b.noop},o="DOMMouseScroll mousewheel",p=[];return function(){n(l,c),i(a,function(a){p.push(j(a))})}(),k={setScroll:d,setDown:e,setUp:f,on:g,off:h}},P=function(){var a={};return a}(),Q=function(a){var b,c;return b=h(a),0===b.length&&(b=K.clone()),b.length>1&&(b=b.eq(0)),c=b.attr(t+"name"),c||(c=x.create(),b.attr(t+"name",c)),{$origin:b,"public":{name:c}}},R=function(a){var c=[];return c.name=e(a)?a:"empty",c.controlsName=m(a),c.isControlsGroup=!0,c.findDocument=b.noop,c.init=function(a,b){return a["public"]},c.create=function(a,b){if(a=g.call(this,a)){var c=Q(a);return this.push(c["public"]),this[c["public"].name]=c["public"],l(c.$origin,this.name),c.$origin.attr(t+this.name+"-state",!0),this.init(c,b),c["public"]}},P[c.name]=c,c},S=function(b,c){function d(){if(v.hasVertical){var a=0,b=0,c=0;if(a=x.height(),F.h=w.height(),F.ih=w.innerHeight(),F.sh=a-F.h,c=F.ih-2*v.barOffset,0!==F.h){var d=F.sh/(5*F.ih);d=1-(d>1?1:d),b=c*d,b=b<v.barMinLength?v.barMinLength:b,b=b>c?c:b,G.h=b,G.mh=c,G.sh=c-b,A.height(b)}}if(v.hasHorizontal){var e=0,f=0,g=0;if(e=x.width(),F.w=w.width(),F.iw=w.innerWidth(),F.sw=e-F.w,g=F.iw-2*v.barOffset,0!==F.w){var d=F.sw/(5*F.iw);d=1-(d>1?1:d),f=g*d,f=f<v.barMinLength?v.barMinLength:f,f=f>g?g:f,G.w=f,G.mw=g,G.sw=g-f,z.width(f)}}}function e(){var a,b;if(u.transition){var c=x.css("transform");c=c.split(")")[0].split(", "),a=Math.round(+(c[12]||c[4])),b=Math.round(+(c[13]||c[5]))}else a=F.now.x,b=F.now.y;return{x:a,y:b}}function f(a,b,c,d){c=c||0,d=d||B.circular,u.transition?(g(d.css),i(c),x.css("transform","translate("+a+"px, "+b+"px)"+(u.perspective?" translateZ(0)":"")),F.now={x:a,y:b}):0===c?(x.css({left:a,top:b}),F.now={x:a,y:b}):j(a,b,c,d.fn)}function g(a){x.css("transition-timing-function",a)}function i(a){var b=parseInt(a);x.css("transition-duration",b+"ms")}function j(a,b,c,d){function e(){var j,k,l,m=y();m>=i?(F.now.x=a,F.now.y=b,setScrollingState(!1),resetPosition()):(m=(m-h)/c,l=d(m),j=(a-f)*l+f,k=(b-g)*l+g,F.now.x=j,F.now.y=k,x.css({left:j,top:k}),$bar.css("top",-k/F.sh*G.sh),D&&animationFrame(e))}var f=F.now.x,g=F.now.y,h=y(),i=h+c;D=!0,e()}function k(){0===v.barState&&(G.timer&&a.clearTimeout(G.timer),u.transition?(z.stop().fadeIn(200),A.stop().fadeIn(200)):(z.show(),A.show()))}function l(a,b,c,d,e,f){var g,h,i=a-b,j=Math.abs(i)/c;return d=-d,e=e||0,f=f||5e-4,g=a+j*j/(2*f)*(0>i?-1:1),h=j/f,d>g?(g=e?d-e/2.5*(j/8):d,i=Math.abs(g-a),h=i/j):g>0&&(g=e?e/2.5*(j/8):0,i=Math.abs(a)+g,h=i/j),{destination:Math.round(g),duration:h}}function m(){d(),k();var a=e();f(a.x,a.y),C.moved=!1,C.start=y(),C.startMove={x:F.now.x,y:F.now.y},C.lastMove={x:0,y:0}}function o(a){var b=y(),c=a.x,d=a.y,e=Math.abs(c),g=Math.abs(d),h=c-C.lastMove.x,i=d-C.lastMove.y,j=0,k=0;C.lastMove={x:c,y:d},b-C.end>300&&E>e&&E>g||(C.moved||(C.moved=!0),C.isHome=!1,C.isEnd=!1,C.isLeft=!1,C.isRight=!1,v.hasVertical&&(k=i+F.now.y,(k>0||k<-F.sh)&&(k=k>0?0:-F.sh)),v.hasHorizontal&&(j=h+F.now.x,(j>0||j<-F.sw)&&(j=j>0?0:-F.sw)),(0!==h||0!==i)&&f(j,k),b-C.start>300&&(C.start=b,C.startMove.x=j,C.startMove.y=k))}function q(){var a,b=F.now.x,c=F.now.y,d=b,e=c,g=null,h=null,i=y()-C.start,j=0;if(C.end=y(),C.moved){if(300>i){var k=0,m=0;v.hasVertical&&(h=l(c,C.startMove.y,i,F.sh,v.bounce?F.h:0),e=h.destination,m=h.duration),v.hasHorizontal&&(g=l(b,C.startMove.x,i,F.sw,v.bounce?F.w:0),d=g.destination,k=g.duration),j=Math.max(k,m)}(d!==b||e!==c)&&((d>0||d<F.sw||e>0||e<F.sh)&&(a=B.quadratic),f(d,e,j,a))}}function r(){v.recountScreenChange&&p.bind("resize orientationchange",d),N(x,{stopPropagation:!0}).setDown(m).setUp(q).setPan(o)}var s={},v={slowMoving:!0,recountSize:!1,barState:0,barSize:5,barMinLength:30,barOffset:1,barColor:"rgba(0,0,0,.5)",barBorderRadiusState:!0,mousewheelLength:200,hasHorizontal:!1,hasVertical:!0},w=h(b).eq(0),x=K.clone().addClass(t+"scroll-wrapper"),z=K.clone().addClass(t+"scroll-bar"),A=K.clone().addClass(t+"scroll-bar"),B={quadratic:{css:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(a){return a*(2-a)}},circular:{css:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(a){return Math.sqrt(1- --a*a)}}},C={id:null,start:0,end:0,moved:!1,startMove:{x:0,y:0},lastMove:{x:0,y:0}},D=!1,E=5,F={h:0,ih:0,sh:0,w:0,iw:0,sw:0,now:{x:0,y:0},isMoved:!1},G={h:0,mh:0,sh:0,w:0,mw:0,sw:0,timer:null};return function(){n(v,c);var a=w.contents();0===a.length?w.append(x):(a.wrapAll(x),x=w.children("."+t+"scroll-wrapper")),x.css("padding",w.css("padding-top")+" "+w.css("padding-right")+" "+w.css("padding-bottom")+" "+w.css("padding-left")),w.addClass("ud2-scroll"),v.hasVertical&&w.prepend(A),v.hasHorizontal&&w.prepend(z),A.css({top:v.barOffset,right:v.barOffset,width:v.barSize,background:v.barColor}),z.css({left:v.barOffset,bottom:v.barOffset,height:v.barSize,background:v.barColor}),d(),r()}(),s};return function(){q.ready(function(){u.safari&&o.body.addEventListener("touchstart",b.noop),M.fire()})}(),P.reg=w,P.support=u,P.animateFrame=v,P.event=N,P.eventMouseWheel=O,P.ctrl=Q,P.ctrlGroup=R,P.scroll=S,P}(window,jQuery);
/* lasted： 2015-10-15 06:33:54 */